(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{121:function(e,a,t){e.exports=t.p+"static/media/integra_logo.ffdf0581.png"},169:function(e,a,t){e.exports=t(249)},174:function(e,a,t){},175:function(e,a,t){},183:function(e,a,t){},184:function(e,a,t){},185:function(e,a,t){},186:function(e,a,t){},187:function(e,a,t){},188:function(e,a,t){},189:function(e,a,t){},191:function(e,a,t){},192:function(e,a,t){},193:function(e,a,t){},194:function(e,a,t){},195:function(e,a,t){},196:function(e,a,t){},197:function(e,a,t){},198:function(e,a,t){},202:function(e,a,t){},204:function(e,a,t){},205:function(e,a,t){},206:function(e,a,t){},207:function(e,a,t){},208:function(e,a,t){},209:function(e,a,t){},210:function(e,a,t){},211:function(e,a,t){},212:function(e,a,t){},213:function(e,a,t){},214:function(e,a,t){},215:function(e,a,t){},216:function(e,a,t){},217:function(e,a,t){},218:function(e,a,t){},219:function(e,a,t){},220:function(e,a,t){},221:function(e,a,t){},222:function(e,a,t){e.exports=t.p+"static/media/preview.0a0f74fa.jpg"},239:function(e,a,t){},240:function(e,a,t){},241:function(e,a,t){},242:function(e,a,t){},243:function(e,a,t){},244:function(e,a,t){},247:function(e,a,t){},248:function(e,a,t){},249:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),o=t(80),l=t.n(o),c=(t(174),t(175),t(58)),s=t(21),i=t(108),u=t(32),d={setDatabase:"SET_DATABASE",setMongoClient:"SET_MONGO_CLIENT",setUserLogged:"SET_USER_LOGGED",showModal:"SHOW_MODAL",closeModal:"CLOSE_MODAL",setProfissionais:"SET_PROFISSIONAIS",setAdministrativo:"SET_ADMS",setSalas:"SET_SALAS",selectDate:"SELECT_DATE",selectSala:"SELECT_SALA",selectAgendamentos:"SELECT_AGENDAMENTO",setAgendamentos:"SET_AGENDAMENTOS",selectAdministrador:"SELECT_ADM",selectProfissional:"SELECT_PROF",setLogs:"SET_LOGS",setProfissionalReservas:"SET_PROF_RESERVAS"},m={database:null,mongoClient:null,modalType:"",userLogged:{},showModal:!1,dateSelected:new Date},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case d.setMongoClient:return Object(u.a)({},e,{mongoClient:a.payload});case d.setDatabase:return Object(u.a)({},e,{database:a.payload});case d.setUserLogged:return Object(u.a)({},e,{userLogged:a.payload});case d.showModal:return Object(u.a)({},e,{showModal:!0,modalType:a.payload});case d.closeModal:return Object(u.a)({},e,{showModal:!1});case d.selectDate:return Object(u.a)({},e,{dateSelected:a.payload});default:return e}},p={profissionais:[],profissionalSelected:{},profissionalReservas:[]},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case d.setProfissionais:return Object(u.a)({},e,{profissionais:n});case d.selectProfissional:return Object(u.a)({},e,{profissionalSelected:n});case d.setProfissionalReservas:return Object(u.a)({},e,{profissionalReservas:n});default:return e}},v=t(164),h={administradores:[],administradorSelected:{}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case d.setAdministrativo:return Object(u.a)({},e,{administradores:n});case d.selectAdministrador:return Object(u.a)({},e,{administradorSelected:n});default:return e}},b={salas:[],salaSelected:{}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case d.setSalas:return Object(u.a)({},e,{salas:n});case d.selectSala:return Object(u.a)({},e,{salaSelected:n});default:return e}},S={salaSelected:{},agendamentos:[],agendamentoSelected:{}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case d.selectSala:return Object(u.a)({},e,{salaSelected:n});case d.setAgendamentos:return Object(u.a)({},e,{agendamentos:n});case d.selectAgendamentos:return Object(u.a)({},e,{agendamentoSelected:n});default:return e}},x={logs:[]},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case d.setLogs:return Object(u.a)({},e,{logs:n});default:return e}},k=Object(i.d)(Object(i.c)({general:f,profissionais:g,administradores:E,salas:y,agendamentos:_,logs:w},Object(i.a)(v.a))),N=t(74),O=t(34),j=t(18),C=t.n(j),A=t(27),M=t(19),D="administradores",L={db:null,setDb:function(e){this.db=e},create:function(e){return console.log("created administrador"),this.db.collection(D).insertOne(e)},update:function(e,a){return console.log("update administrador"),this.db.collection(D).updateMany(e,{$set:a})},delete:function(e){return console.log("delete administrador"),this.db.collection(D).deleteMany(e)},findAll:function(){return console.log("find administrador"),this.db.collection(D).find({}).toArray()},addUser:function(e,a,t,n){var r=this;return Object(A.a)(C.a.mark((function o(){var l;return C.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return console.log("add User"),l=e.auth.getProviderClient(c.d.factory),o.prev=2,o.next=5,L.find({email:a});case 5:if(!(o.sent.length>0)){o.next=10;break}alert("Administrador j\xe1 existe com esse email."),o.next=13;break;case 10:return o.next=12,l.registerWithEmail(a,t);case 12:return o.abrupt("return",r.create(Object(u.a)({},n,{email:a})));case 13:o.next=19;break;case 15:return o.prev=15,o.t0=o.catch(2),alert("ATEN\xc7\xc3O: J\xe1 existe um profissional com esse e-mail, por favor, considere a SENHA do profissional j\xe1 cadastrado. Essa conta agora ter\xe1 privil\xe9gios administrativos."),o.abrupt("return",r.create(Object(u.a)({},n,{email:a})));case 19:case"end":return o.stop()}}),o,null,[[2,15]])})))()},anonymousLogin:function(e){return console.log("Anonymous Login"),e.auth.loginWithCredential(new c.a)},find:function(e){return console.log("Query administrador"),this.db.collection(D).find(e).toArray()},userPasswordLogin:function(e,a,t){console.log("User Password Login");var n=new c.e(a,t);return e.auth.loginWithCredential(n)}},R=L,P=(t(183),t(184),function(e){return r.a.createElement("div",{className:"input_text",style:e.style},r.a.createElement("input",{placeholder:e.placeholder,onChange:e.onChange,step:"0.01",required:e.required,disabled:e.disabled,defaultValue:e.defaultValue,type:e.type?e.type:"text",name:e.name?e.name:""}),r.a.createElement("label",{className:"label"},e.label))}),T=(t(185),function(e){return r.a.createElement("button",{type:e.type,style:e.width?{width:e.width}:{},onClick:e.onClick,editing:e.editing,disabled:e.loading||e.editing,className:e.loading||e.editing?"button "+e.className+" loading":"button "+e.className},e.loading?"Carregando":e.editing?"Editando":e.text)}),Y=(t(186),function(e){var a=e.onCheck,t=void 0===a?function(){}:a,n=e.label,o=r.a.useState(!1),l=Object(M.a)(o,2),c=l[0],s=l[1];return r.a.createElement("div",{className:"checkbox_container"},r.a.createElement("div",{className:c?"checkbox checked":"checkbox",onClick:function(){s(!c),t(c)}}),r.a.createElement("label",null,n))}),F=(t(187),function(){return r.a.createElement("div",{className:"modo_paisagem"},r.a.createElement("h2",null,"Por favor, vire o seu celular! :("))}),H={db:null,setDb:function(e){this.db=e},delete:function(e){var a=this;return Object(A.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("delete cliente"),t.abrupt("return",a.db.collection("clientes").deleteOne(e));case 2:case"end":return t.stop()}}),t)})))()},create:function(e){return console.log("create cliente"),this.db.collection("clientes").insertOne(e)},update:function(e,a){return console.log("update cliente"),this.db.collection("clientes").updateMany(e,{$set:a})},editCliente:function(e,a){return console.log("edit cliente"),this.update({_id:e},a)},addUser:function(e,a,t,n){var r=this;return Object(A.a)(C.a.mark((function o(){var l;return C.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return console.log("add cliente user"),l=e.auth.getProviderClient(c.d.factory),o.prev=2,o.next=5,l.registerWithEmail(a,t);case 5:o.next=10;break;case 7:o.prev=7,o.t0=o.catch(2),alert('O usu\xe1rio de e-mail j\xe1 foi definido e talvez deletado anteriormente. Para redefinir senha, por favor, pe\xe7a ao usu\xe1rio que v\xe1 em "Esqueceu sua Senha?" na tela de Login.');case 10:return o.abrupt("return",r.create(Object(u.a)({},n,{email:a})));case 11:case"end":return o.stop()}}),o,null,[[2,7]])})))()},login:function(e,a,t){return console.log("login cliente"),e.auth.loginWithCredential(new c.e(a,t))},findAll:function(){return console.log("find all clientes"),this.db.collection("clientes").find({},{sort:{nome:1}}).toArray()},find:function(e){return console.log("find query clientes"),this.db.collection("clientes").find(e).toArray()},fixarSalaNoTopo:function(e,a){return a.sala_fixa&&a.sala_fixa.toString()===e._id.toString()?this.db.collection("clientes").updateOne({_id:a._id},{$set:{sala_fixa:null}}):this.db.collection("clientes").updateOne({_id:a._id},{$set:{sala_fixa:e._id}})}},U=t(71),I=t.n(U),q=(t(188),function(e){var a=r.a.useRef();return r.a.useEffect((function(){a.current&&setTimeout((function(){a.current&&a.current.reset()}),300)}),[e.show]),r.a.createElement("div",{className:e.show?"modal_container":"modal_container hidden"},e.header,r.a.createElement("form",{ref:a,onSubmit:e.onSubmit,encType:"multipart/form-data"},r.a.createElement("div",null,e.body),e.footer))}),V=Object(s.b)((function(e){return{}}),(function(e){return{}}))((function(e){return r.a.createElement(q,{onSubmit:e.onSubmit,header:r.a.createElement("header",null,r.a.createElement("div",null,r.a.createElement("h1",null,"Recuperar Senha")),r.a.createElement("div",{className:"close_container",onClick:e.onClose},r.a.createElement("i",{className:"fa fa-times"}))),show:e.show,close:e.onClose,body:r.a.createElement("div",null,r.a.createElement("p",{style:{color:"#888"}},"Enviaremos para voc\xea um e-mail com link para redefini\xe7\xe3o."),r.a.createElement(P,{label:"Seu e-mail",name:"email"})),footer:r.a.createElement("div",{className:"footer"},r.a.createElement(T,{loading:e.loading,type:"submit",text:"Confirmar"}))})})),B=(t(189),Object(s.b)((function(e){return{}}),(function(e){return{}}))((function(e){return r.a.createElement(q,{show:e.show,onClose:e.onClose,header:r.a.createElement("header",null,r.a.createElement("div",null,r.a.createElement("h1",null,"Tipo de Usu\xe1rio")),r.a.createElement("div",{className:"close_container",onClick:e.onClose},r.a.createElement("i",{className:"fa fa-times"}))),body:r.a.createElement("div",{className:"tipos_usuarios"},r.a.createElement("div",{onClick:e.onClickAdm},r.a.createElement("h1",null,"Entrar como Administrador")),r.a.createElement("div",{onClick:e.onClickProfissional},r.a.createElement("h1",null,"Entrar como Profissional")))})}))),z=Object(s.b)((function(e){return{mongoClient:e.general.mongoClient,database:e.general.database,userLogged:e.general.userLogged}}),(function(e){return{setUserLogged:function(a){return e({type:d.setUserLogged,payload:a})},setProfissionalReservas:function(a){return e({type:d.setProfissionalReservas,payload:a})}}}))((function(e){var a=e.mongoClient,n=e.userLogged,o=e.setUserLogged,l=r.a.useState(!1),s=Object(M.a)(l,2),i=(s[0],s[1],r.a.useState(!1)),u=Object(M.a)(i,2),d=(u[0],u[1],r.a.useState(!0)),m=Object(M.a)(d,2),f=m[0],p=m[1],g=r.a.useState(!1),v=Object(M.a)(g,2),h=(v[0],v[1]),E=r.a.useState(!1),b=Object(M.a)(E,2),y=b[0],S=b[1],_=r.a.useState(!1),x=Object(M.a)(_,2),w=x[0],k=x[1],N=r.a.useState(null),j=Object(M.a)(N,2),D=j[0],L=j[1],U=r.a.useState(null),q=Object(M.a)(U,2),z=q[0],$=q[1],G=Object(O.useHistory)(),W=function(){var e=Object(A.a)(C.a.mark((function e(t,n){var r,l;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],l=[],p(!0),e.prev=2,e.next=5,H.login(a,t,n);case 5:return e.next=7,H.find({email:t});case 7:return r=e.sent,e.next=10,R.find({email:t});case 10:l=e.sent,r.length>0&&l.length>0?(k(!0),L(l),$(r)):r.length>0?(o(r[0]),G.push("/agendamentos")):l.length>0&&(o(l[0]),G.push("/agendamento_adm")),l.length<=0&&r.length<=0&&alert("Erro interno. Por favor, contate os desenvolvedores."),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0),46===e.t0.errorCode?alert("Usu\xe1rio ou senha inv\xe1lidos."):alert("Erro desconhecido! Log do erro "+e.t0);case 19:p(!1);case 20:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(a,t){return e.apply(this,arguments)}}();r.a.useEffect((function(){var e=[localStorage.getItem("email"),localStorage.getItem("pwd")],t=e[0],n=e[1];a&&t&&n&&W(t,n)}),[a]);for(var Q=new Array(5),J=0;J<5;J++)Q[J]=new Array(7).fill(0);for(var X=I()(new Date).startOf("month"),K=I()(),Z=0;Z<5;Z++)for(var ee=0;ee<7;ee++)X.toDate().getDay()===ee&&X.isSame(K,"month")?(Q[Z][ee]=X.date(),X.add(1,"day")):Q[Z][ee]=0;console.log(Q);var ae=Object(O.useHistory)();return r.a.useEffect((function(){"nome"in n?(p(!0),"ocupacao"in n?ae.push("/agendamentos"):ae.push("/agendamento_adm")):p(!1)}),[n]),r.a.createElement("div",{className:"login_container"},r.a.createElement(F,null),r.a.createElement(B,{show:w,onClose:function(){return k(!1)},onClickAdm:function(){o(D[0]),G.push("/agendamento_adm")},onClickProfissional:function(){o(z[0]),G.push("/agendamentos")}}),r.a.createElement(V,{onSubmit:function(){var e=Object(A.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target,p(!0),e.prev=3,e.next=6,a.auth.getProviderClient(c.d.factory).sendResetPasswordEmail(n.email.value);case 6:alert("Por favor, cheque seu e-mail, enviamos um link para redefini\xe7\xe3o de senha."),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),alert(e.t0);case 12:S(!1),p(!1);case 14:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(a){return e.apply(this,arguments)}}(),loading:f,onClose:function(){return S(!1)},show:y}),r.a.createElement("div",{className:"ball"}),r.a.createElement("div",{className:"logo_container"},r.a.createElement("img",{alt:"integra_logo",src:t(121)}),r.a.createElement("p",null,"Sistema de Gerenciamento")),r.a.createElement("div",{className:"login"},r.a.createElement("h1",null,"Login"),r.a.createElement("div",{className:"card"},r.a.createElement("form",{onSubmit:function(){var e=Object(A.a)(C.a.mark((function e(a){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),p(!0),e.next=4,W(a.target.email.value,a.target.senha.value);case 4:p(!1);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},r.a.createElement(P,{name:"email",label:"E-mail",placeholder:"Ex: joao@example.com"}),r.a.createElement(P,{name:"senha",label:"Senha",type:"password",placeholder:"Informe sua senha"}),r.a.createElement(Y,{onCheck:function(e){h(!e)},label:"Manter-me Conectado"}),r.a.createElement(T,{loading:f,type:"submit",text:"Confirmar"}))),r.a.createElement("p",{onClick:function(){return S(!0)},className:"forgot_pwd"},"Esqueceu sua senha?")))})),$=(t(191),t(192),Object(s.b)((function(e){return{}}),(function(e){return{setUserLogged:function(a){return e({type:d.setUserLogged,payload:a})}}}))((function(e){var a=Object(O.useHistory)();return r.a.createElement("div",{className:e.menuOpen?"menu_container open":"menu_container"},r.a.createElement("ul",null,r.a.createElement("li",{onClick:function(){return a.push("/configuracoes")}},"Configura\xe7\xf5es de Perfil"),r.a.createElement("li",{onClick:function(){return e.setUserLogged({}),localStorage.removeItem("email"),localStorage.removeItem("pwd"),void a.push("/")}},"Sair")))}))),G=Object(s.b)((function(e){return{userLogged:e.general.userLogged}}),(function(e){return{setUserLogged:function(a){return e({type:d.setUserLogged,payload:a})}}}))((function(e){Object(O.useHistory)();var a=r.a.useState(!1),n=Object(M.a)(a,2),o=n[0],l=n[1];return r.a.createElement("div",{className:"topbar_container"},r.a.createElement("div",{className:"img_container"},r.a.createElement("img",{alt:"logo",src:t(121)})),r.a.createElement("div",{className:"titulo"},r.a.createElement("h2",null,"Portal da Equipe"),r.a.createElement("h4",null,"Agendamentos")),r.a.createElement("div",{className:"user_data"},r.a.createElement("div",null,r.a.createElement("h2",null,e.userLogged?e.userLogged.nome:"Catherine Torres"),r.a.createElement("h4",null,e.userLogged?e.userLogged.ocupacao:"Fisioterapeuta"))),r.a.createElement("img",{alt:"profile_pic",className:"profile_pic",src:e.userLogged?e.userLogged.foto_url:"https://randomuser.me/api/portraits/women/43.jpg"}),r.a.createElement(T,{onClick:function(){l(!o)},width:"5%",text:r.a.createElement("i",{className:"fas "+(o?"fa-chevron-up":"fa-chevron-down")}),className:"log-off"}),r.a.createElement($,{menuOpen:o}))})),W=(t(193),t(194),t(65)),Q=t.n(W),J={db:null,setDb:function(e){this.db=e},create:function(e){return console.log("create login"),this.db.collection("logs").insertOne(e)},findAll:function(){return console.log("find all logs"),this.db.collection("logs").find({}).toArray()}},X=t(57),K=t.n(X),Z=t(105),ee=Object(Z.extendMoment)(K.a),ae=function(e,a){return"".concat(ee(e).format("yyyy-MM-DD")," ").concat(a,":00")},te=function(e,a,t,n){var r=ee.range(e,a),o=ee.range(t,n);return r.overlaps(o)},ne={db:null,setDb:function(e){this.db=e},create:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return a&&(console.log("Create reserva"),J.create({usuario:a,log:"Adicionou uma reserva",data_hora:new Date})),this.db.collection("reservas").insertOne(e)},update:function(e,a){return console.log("Update reserva"),this.db.collection("reservas").updateMany(e,{$set:a})},cancelaReserva:function(e){return console.log("Cancela reserva"),this.update({_id:e},{cancelado:!0})},cancelaMuitasReservas:function(e){console.log("Cancela muita reserva");for(var a=[],t=0;t<e.length;t++)a.push(this.cancelaReserva(e[t]._id));return Promise.all(a)},executaReserva:function(e){return console.log("Executa reserva"),this.update({_id:e},{executado:!0,execucao_fim:new Date})},pagaReserva:function(e,a){return console.log("Paga reserva"),this.update({_id:e},{pago:a})},editaReserva:function(e,a){return console.log("Edita reserva"),this.update({_id:e},a)},comecaReserva:function(e){return console.log("Come\xe7a a executar a reserva"),this.update({_id:e},{execucao_inicio:new Date})},findReservaDeCliente:function(e,a){console.log("Find Reserva de Cliente");var t=[];return a.forEach((function(a){a.profissional&&a.profissional._id.toString()===e.toString()&&t.push(a)})),t},findAll:function(e){return console.log("Find All de Cliente"),e.callFunction("getAgendamentos")},getAgendamentosById:function(e,a){var t=null;return e.forEach((function(e){e._id.toString()===a.toString()&&(t=e)})),t},createHoraAvulsa:function(e,a,t,n,r){return Object(A.a)(C.a.mark((function o(){var l,c,s,i,u,d,m,f,p,g,v;return C.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(l=new Date(ae(t,e.hora_inicio)),c=new Date(ae(t,e.hora_fim)),s=!0,console.log(a),console.log(e),!(e.hora_inicio<=0||e.hora_fim<=0)){o.next=10;break}s=!1,r(),o.next=41;break;case 10:i=!0,u=!1,d=void 0,o.prev=13,m=a[Symbol.iterator]();case 15:if(i=(f=m.next()).done){o.next=26;break}if(p=f.value,g=new Date(ae(new Date(p.data),p.hora_inicio)),v=new Date(ae(new Date(p.data),p.hora_fim)),p.cancelado||p.sala_id.toString()!==e.sala_id.toString()){o.next=23;break}if(!te(l,c,g,v)){o.next=23;break}return s=!1,r(),o.abrupt("break",26);case 23:i=!0,o.next=15;break;case 26:o.next=32;break;case 28:o.prev=28,o.t0=o.catch(13),u=!0,d=o.t0;case 32:o.prev=32,o.prev=33,i||null==m.return||m.return();case 35:if(o.prev=35,!u){o.next=38;break}throw d;case 38:return o.finish(35);case 39:return o.finish(32);case 40:s&&n();case 41:case"end":return o.stop()}}),o,null,[[13,28,32,40],[33,,35,39]])})))()},getAgendamentosFromSala:function(e,a){console.log("get Agendamentos da sala");var t=[];return e.forEach((function(e){"sala"in e&&a.nome===e.sala.nome&&t.push(e)})),t}},re=function(e){var a=e.split(".");return a.length>0&&("jpg"===a[a.length-1].toLowerCase()||"jpeg"===a[a.length-1].toLowerCase()||"gif"===a[a.length-1].toLowerCase()||"png"===a[a.length-1].toLowerCase())},oe=function(e){return"number"==typeof e&&(e=e.toFixed(2)),(e="R$ "+e).includes(".")||e.includes(",")?e=e.replace(".",","):e+=",00",e},le=function(e){return e+":00"},ce=function(e){return r.a.createElement("div",{className:"reserva"},r.a.createElement("i",null,r.a.createElement("h2",null,"Reservado")),r.a.createElement("h4",null,le(e.reserva.hora_inicio)," ~ ",le(e.reserva.hora_fim)))},se=["Dom","Seg","Ter","Qua","Qui","Sex","S\xe1b"],ie=Object(s.b)((function(e){return{agendamentos:e.agendamentos.agendamentos}}))((function(e){var a=r.a.useState([]),t=Object(M.a)(a,2),n=t[0],o=t[1],l=r.a.useState(Q()()),c=Object(M.a)(l,2),s=c[0],i=c[1];return r.a.useEffect((function(){o(ne.getAgendamentosFromSala(e.agendamentos,e.sala))}),[e.agendamentos]),r.a.createElement("div",{className:"container_week"},r.a.createElement("div",{onClick:function(){o(ne.getAgendamentosFromSala(e.agendamentos,e.sala)),i(s.subtract(1,"week"))},className:s.isSame(new Date,"week")?"chevron hidden":"chevron"},r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-chevron-left"}))),se.map((function(a,t){var o=Q()(s.toDate()).locale("pt-BR").startOf("week").add(t,"days");return r.a.createElement("div",{key:a,className:"week_day"},r.a.createElement("h1",{className:o.isSame(new Date,"day")?"today":""},a),r.a.createElement("h3",{className:o.isSame(new Date,"day")?"today":""},o.format("DD/MMM")),n.map((function(a,t){return o.isSame(a.data,"day")&&!a.cancelado?"mes"in a?o.isSame(new Date,"day")?r.a.createElement("div",{onClick:function(){return e.addReservaListener(o)},className:"add"},r.a.createElement("span",null,"+")):r.a.createElement(r.a.Fragment,null):r.a.createElement(ce,{key:t,reserva:a}):r.a.createElement(r.a.Fragment,null)})),o.isSameOrAfter(new Date,"day")?r.a.createElement("div",{onClick:function(){return e.addReservaListener(o)},className:"add"},r.a.createElement("span",null,"+")):r.a.createElement(r.a.Fragment,null))})),r.a.createElement("div",{onClick:function(){o(ne.getAgendamentosFromSala(e.agendamentos,e.sala)),i(s.add(1,"week"))},className:s.isSame(Q()().add(2,"week"),"week")?"chevron hidden":"chevron"},r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-chevron-right"}))))})),ue=t(166),de=Object(s.b)((function(e){return{userLogged:e.general.userLogged,agendamentos:e.agendamentos.agendamentos}}),(function(e){return{setUserLogged:function(a){return e({type:d.setUserLogged,payload:a})}}}))((function(e){var a=r.a.useState(!1),t=Object(M.a)(a,2),n=t[0],o=t[1],l=r.a.useState(!1),c=Object(M.a)(l,2),s=c[0],i=c[1];return r.a.useEffect((function(){e.userLogged.sala_fixa&&"_id"in e.sala&&o(e.sala._id.toString()===e.userLogged.sala_fixa.toString()),i(function(){for(var a=0;a<e.agendamentos.length;a++)if("mes"in e.agendamentos[a]&&e.agendamentos[a].sala_id.toString()===e.sala._id.toString()&&e.agendamentos[a].mes.getMonth()===(new Date).getMonth())return!0;return!1}())}),[e]),r.a.createElement("div",{className:"sala_content"},r.a.createElement(ue.a,{id:"main",place:"left",type:"info",effect:"solid"}),r.a.createElement("div",{className:"sala_container"},r.a.createElement("div",null,r.a.createElement("h1",null,r.a.createElement("span",{className:n?"fixa":"",onClick:Object(A.a)(C.a.mark((function a(){var t;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n){a.next=9;break}return a.next=3,H.fixarSalaNoTopo(e.sala,e.userLogged);case 3:delete(t=Object(u.a)({},e.userLogged)).sala_fixa,e.setUserLogged(t),o(!1),a.next=13;break;case 9:return a.next=11,H.fixarSalaNoTopo(e.sala,e.userLogged);case 11:e.setUserLogged(Object(u.a)({},e.userLogged,{sala_fixa:e.sala._id})),o(!0);case 13:case"end":return a.stop()}}),a)}))),"data-for":"main","data-tip":"Fixar no Topo","data-iscapture":"true"},r.a.createElement("i",{className:"fas fa-thumbtack"})," ","\xa0"),e.sala.nome),r.a.createElement("p",null,"Hor\xe1rios Reservados")),r.a.createElement("div",null,r.a.createElement(T,{className:"btn_detalhes",text:"Detalhes",onClick:e.onClickDetalhesListener}))),s?r.a.createElement("h2",{className:"aluguel_mensal"},"Esta sala est\xe1 alugada por todo o m\xeas e n\xe3o est\xe1 dispon\xedvel para agendamentos."):r.a.createElement(ie,{sala:e.sala,isAdm:e.isAdm,addReservaListener:e.addReservaListener}))})),me=(t(195),t(196),t(53)),fe=Object(s.b)((function(e){return{salaSelected:e.salas.salaSelected,dateSelected:e.general.dateSelected}}))((function(e){var a=function(){return 6===e.dateSelected.getDay()},t=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=e;r<(t?a()?13:21:a()?12:20);r++)n.push({label:r+":00",value:r});return n},n=r.a.useState(0),o=Object(M.a)(n,2),l=o[0],c=o[1],s=r.a.useState(0),i=Object(M.a)(s,2),u=i[0],d=i[1],m=r.a.useState(t(8,!0)),f=Object(M.a)(m,2),p=f[0],g=f[1];return r.a.useEffect((function(){c(0),d(0),g(e.dateSelected.getUTCDay()===(new Date).getUTCDay()?t((new Date).getHours()+1,!0):t(8,!0))}),[e.dateSelected]),r.a.createElement("div",null,r.a.createElement("div",{className:"horas_intervalo"},r.a.createElement("div",null,r.a.createElement("h2",null,"Hora Inicial"),r.a.createElement(me.a,{name:"hora_inicio",value:0===l?"":{label:l+":00",value:l},style:{width:"100px"},onChange:function(a){g(a?t(a.value+1,!0):t(e.dateSelected.getUTCDay()===(new Date).getUTCDay())?t((new Date).getHours()+1):t(9)),c(a?a.value:0)},classNamePrefix:"Select",options:e.dateSelected.getUTCDay()===(new Date).getUTCDay()?t((new Date).getHours()+1):t(9)})),r.a.createElement("div",null,r.a.createElement("h2",null,"Hora Final"),r.a.createElement(me.a,{onChange:function(e){return d(e?e.value:0)},name:"hora_fim",value:0===u?"":{label:u+":00",value:u},classNamePrefix:"Select",options:p}))),r.a.createElement("div",{className:"resume_container"},r.a.createElement("div",null,r.a.createElement("h2",null,"Valor/Hora"),r.a.createElement("h3",null,oe(e.salaSelected.valor_hora))),r.a.createElement("div",null,r.a.createElement("h2",null,"Valor Total:"),r.a.createElement("h3",null,oe(0===u?0:e.salaSelected.valor_hora*(u-l))))))})),pe=Object(s.b)((function(e){return{profissionais:e.profissionais.profissionais,dateSelected:e.general.dateSelected}}))((function(e){var a=6===e.dateSelected.getDay()?[{label:"08:00h \xe0s 12:00h",value:{hora_inicio:8,hora_fim:12}}]:[{label:"08:00h \xe0s 13:00h",value:{hora_inicio:8,hora_fim:13}},{label:"14:00h \xe0s 18:00h",value:{hora_inicio:14,hora_fim:18}},{label:"15:00h \xe0s 19:00h",value:{hora_inicio:15,hora_fim:19}},{label:"16:00h \xe0s 20:00h",value:{hora_inicio:16,hora_fim:20}}];return r.a.createElement("div",null,r.a.createElement("div",{className:"select_profissionais_container"},r.a.createElement("h2",null,"Dura\xe7\xe3o do Turno"),r.a.createElement(me.a,{onChange:function(a){return e.selectTurno(a.value)},name:"hora_turno",placeholder:"Selecione o Hor\xe1rio do Turno",options:a}),r.a.createElement("div",{className:"resume_container"},r.a.createElement("div",null,r.a.createElement("h2",null,"Valor/Hora"),r.a.createElement("h3",null,"R$39,90")),r.a.createElement("div",null,r.a.createElement("h2",null,"Valor Total:"),r.a.createElement("h3",null,"R$139,90")))))})),ge=Object(s.b)((function(e){return{profissionais:e.profissionais.profissionais}}))((function(e){var a=r.a.useState([]),t=Object(M.a)(a,2),n=t[0],o=t[1];return r.a.useEffect((function(){for(var e=[],a=1;a<4;a++)e.push({label:K()(new Date).locale("pt-BR").add(a,"month").format(" MMMM / YYYY"),value:K()(new Date).locale("pt-BR").add(a,"month").toDate()});o(e)}),[]),r.a.createElement("div",null,r.a.createElement("div",{className:"select_profissionais_container"},r.a.createElement("h2",null,"M\xeas a ser Solicitado"),r.a.createElement(me.a,{onChange:function(a){e.selectMes(a.value),console.log(a.value)},style:{marginLeft:"5%",marginRight:"5%"},placeholder:"M\xeas a ser solicitado",options:n})),r.a.createElement("div",{className:"resume_container"},r.a.createElement("div",null,r.a.createElement("h2",null,"Valor Mensal:"),r.a.createElement("h3",null,"R$139,90"))))})),ve=function(e){var a=e.selectedPage,t=(e.selectPage,e.selectTurno),n=e.selectMes;return r.a.createElement("div",null,function(e){switch(e){case"Hora Avulsa":return r.a.createElement(fe,null);case"Turno":return r.a.createElement(pe,{selectTurno:t});case"Mensal":return r.a.createElement(ge,{selectMes:n});default:return r.a.createElement(r.a.Fragment,null)}}(a))},he=Object(Z.extendMoment)(K.a),Ee=Object(s.b)((function(e){return{dateSelected:e.general.dateSelected,salaSelected:e.salas.salaSelected,userLogged:e.general.userLogged,mongoClient:e.general.mongoClient,agendamentos:e.agendamentos.agendamentos}}),(function(e){return{setProfissionalReservas:function(a){return e({type:d.setProfissionalReservas,payload:a})},setAgendamentos:function(a){return e({type:d.setAgendamentos,payload:a})}}}))((function(e){var a=e.show,t=e.close,n=e.dateSelected,o=e.userLogged,l=e.salaSelected,c=e.setAgendamentos,s=e.mongoClient,i=e.agendamentos,d=e.setProfissionalReservas,m=r.a.useState(!1),f=Object(M.a)(m,2),p=f[0],g=f[1],v=r.a.useState("Hora Avulsa"),h=Object(M.a)(v,2),E=h[0],b=h[1],y=r.a.useState({}),S=Object(M.a)(y,2),_=S[0],x=S[1],w=r.a.useState(null),k=Object(M.a)(w,2),N=k[0],O=k[1],j=function(e,a,t,n){var r=he.range(e,a),o=he.range(t,n);return r.overlaps(o)},D=function(e){var a={profissional_id:o._id,sala_id:l._id,data:n,cancelado:!1,pago:!1,executado:!1};switch(E){case"Hora Avulsa":return Object(u.a)({},a,{hora_inicio:Number(e.hora_inicio.value),hora_fim:Number(e.hora_fim.value),valorTotal:Number((l.valor_hora*(Number(e.hora_fim.value)-Number(e.hora_inicio.value))).toFixed(2))});case"Turno":return Object(u.a)({},a,{},_,{valorTotal:l.valor_hora*(_.hora_fim-_.hora_inicio)});case"Mensal":return Object(u.a)({},a,{mes:N,valorTotal:3500})}},L=function(e,a){return"".concat(he(e).format("yyyy-MM-DD")," ").concat(a,":00")},R=function(){var e=Object(A.a)(C.a.mark((function e(a){var r,l,u,m,f,p,v,h,b,y,S,x,w,k,N;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),r=a.target,g(!0),l=D(r),"Hora Avulsa"!==E){e.next=9;break}return e.next=7,ne.createHoraAvulsa(l,i,n,Object(A.a)(C.a.mark((function e(){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.create(l,o);case 2:return e.next=4,ne.findAll(s);case 4:a=e.sent,d(ne.findReservaDeCliente(o._id,a)),c(a),g(!1),alert("Adicionado com sucesso!"),t();case 10:case"end":return e.stop()}}),e)}))),(function(){alert("Erro! O hor\xe1rio j\xe1 se encontra reservado ou hor\xe1rio inv\xe1lido."),g(!1),t()}));case 7:e.next=66;break;case 9:if("Turno"!==E){e.next=57;break}u=new Date(L(n,_.hora_inicio)),m=new Date(L(n,_.hora_fim)),f=!0,p=!0,v=!1,h=void 0,e.prev=16,b=i[Symbol.iterator]();case 18:if(p=(y=b.next()).done){e.next=30;break}if(S=y.value,x=new Date(L(new Date(S.data),S.hora_inicio)),w=new Date(L(new Date(S.data),S.hora_fim)),!j(u,m,x,w)){e.next=27;break}return alert("Erro! O hor\xe1rio j\xe1 se encontra reservado."),f=!1,g(!1),t(),e.abrupt("break",30);case 27:p=!0,e.next=18;break;case 30:e.next=36;break;case 32:e.prev=32,e.t0=e.catch(16),v=!0,h=e.t0;case 36:e.prev=36,e.prev=37,p||null==b.return||b.return();case 39:if(e.prev=39,!v){e.next=42;break}throw h;case 42:return e.finish(39);case 43:return e.finish(36);case 44:if(!f){e.next=55;break}return e.next=47,ne.create(l,o);case 47:return e.next=49,ne.findAll(s);case 49:k=e.sent,d(ne.findReservaDeCliente(o._id,k)),c(k),g(!1),alert("Adicionado com sucesso!"),t();case 55:e.next=66;break;case 57:return e.next=59,ne.create(l,o);case 59:return e.next=61,ne.findAll(s);case 61:N=e.sent,c(N),g(!1),alert("Adicionado com sucesso!"),t();case 66:case"end":return e.stop()}}),e,null,[[16,32,36,44],[37,,39,43]])})));return function(a){return e.apply(this,arguments)}}();return r.a.useEffect((function(){s&&ne.findAll(s).then((function(e){c(e),"nome"in o&&d(ne.findReservaDeCliente(o._id,e))}))}),[s]),r.a.createElement(q,{show:a,onSubmit:R,header:r.a.createElement("header",null,r.a.createElement("div",null,r.a.createElement("h1",null,"Adicionar Reserva"),r.a.createElement("h3",null,he(n).locale("pt-BR").format("DD [de] MMMM [de] YYYY")," - ",l.nome)),r.a.createElement("div",{className:"close_container",onClick:t},r.a.createElement("i",{className:"fa fa-times"}))),body:r.a.createElement("div",null,r.a.createElement(ve,{selectedPage:E,selectPage:b,selectMes:O,selectTurno:x})),footer:r.a.createElement("div",{className:"footer"},r.a.createElement(T,{loading:p,type:"submit",text:"Confirmar"}))})})),be={reservaCliente:"RESERVA_CLIENTE",detalhesSala:"DETALHES_SALA",adicionarAdministrador:"ADD_ADM",adicionarProfissional:"ADD_PROF",adicionarAgendamentoAdm:"ADD_TASK_ADM",adicionarSalas:"ADD_SALAS",adicionarAgendamento:"ADD_AGENDAMENTO",editarAgendamento:"EDIT_AGENDAMENTO_ADM"},ye=(t(197),Object(s.b)((function(e){return{salaSelected:e.salas.salaSelected}}))((function(e){return r.a.createElement(q,{show:e.show,header:r.a.createElement("header",null,r.a.createElement("h1",null,"Detalhes - ",e.salaSelected.nome),r.a.createElement("div",{className:"close_container",onClick:e.close},r.a.createElement("i",{className:"fa fa-times"}))),body:r.a.createElement("div",{className:"modal_sala_body"},"fotos"in e.salaSelected?r.a.createElement("div",{className:"carrousel"},r.a.createElement("i",{className:"fa fa-chevron-left"}),e.salaSelected?r.a.createElement("img",{alt:"",src:e.salaSelected.fotos[0]}):r.a.createElement(r.a.Fragment,null),r.a.createElement("i",{className:"fa fa-chevron-right"})):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"sala_details"},r.a.createElement("div",null,r.a.createElement("h2",null,"Valor/Hora:"),r.a.createElement("h3",null,oe(e.salaSelected.valor_hora))),r.a.createElement("div",null,r.a.createElement("h2",null,"No espa\xe7o cont\xe9m:"),r.a.createElement("h3",null,e.salaSelected.descricao))))})}))),Se=(t(198),t(149)),_e=t.n(Se),xe=function(e){return r.a.createElement("div",{className:"alternating_tabs"},e.elements.map((function(a,t){return r.a.createElement("div",{key:t,className:t===e.selectedIndex?"selected":"",onClick:a.onClick},r.a.createElement("h2",null,a.name))})),0===e.selectedIndex?r.a.createElement(_e.a,{to:"agendamentos"}):r.a.createElement(r.a.Fragment,null),1===e.selectedIndex?r.a.createElement(_e.a,{to:"minhas_reservas"}):r.a.createElement(r.a.Fragment,null))},we=(t(202),Object(s.b)((function(e){return{profissionalReservas:e.profissionais.profissionalReservas}}))((function(e){return r.a.createElement("div",{className:"snack_container"},r.a.createElement("h2",null,"Voc\xea tem ",function(){var a=0;return e.profissionalReservas.forEach((function(e){e.cancelado||e.executado||a++})),a}()," reservas agendadas"))}))),ke={db:null,setDb:function(e){this.db=e},create:function(e){return this.db.collection("salas").insertOne(e)},update:function(e,a){return this.db.collection("salas").updateMany(e,{$set:a})},delete:function(e){return this.db.collection("salas").deleteMany(e)},findAll:function(){return this.db.collection("salas").find({}).toArray()}},Ne=Object(s.b)((function(e){return{showModal:e.general.showModal,modalType:e.general.modalType,salas:e.salas.salas,client:e.general.mongoClient,userLogged:e.general.userLogged,agendamentos:e.agendamentos.agendamentos}}),(function(e){return{openModal:function(a){return e({type:d.showModal,payload:a})},closeModal:function(){return e({type:d.closeModal})},setSalas:function(a){return e({type:d.setSalas,payload:a})},selectDate:function(a){return e({type:d.selectDate,payload:a})},selectSala:function(a){return e({type:d.selectSala,payload:a})},setAgendamentos:function(a){return e({type:d.setAgendamentos,payload:a})},setProfissionalReservas:function(a){return e({type:d.setProfissionalReservas,payload:a})}}}))((function(e){var a=r.a.useState(0),t=Object(M.a)(a,2),n=t[0],o=t[1],l=Object(O.useHistory)();r.a.useEffect((function(){"nome"in e.userLogged||l.push("/")}));var c=function(e,a){var t=[e.nome.split(" "),a.nome.split(" ")],n=t[0],r=t[1];return+n[1]>+r[1]?1:+n[1]<+r[1]?-1:0};return r.a.useEffect((function(){H.db&&"nome"in e.userLogged&&(ke.findAll().then((function(a){if(e.userLogged.sala_fixa){a.sort(c);for(var t=0;t<a.length;t++)if(e.userLogged.sala_fixa.toString()===a[t]._id.toString()){var n=a[0];a[0]=a[t],a[t]=n}}else a.sort(c);console.log(a),e.setSalas(a)})),ne.findAll(e.client).then((function(a){e.setAgendamentos(a),e.setProfissionalReservas(ne.findReservaDeCliente(e.userLogged._id,a))})))}),[e.client,e.userLogged]),r.a.createElement("div",null,r.a.createElement(F,null),r.a.createElement(Ee,{close:function(){return e.closeModal()},show:e.showModal&&e.modalType===be.reservaCliente}),r.a.createElement(ye,{close:function(){return e.closeModal()},show:e.showModal&&e.modalType===be.detalhesSala}),r.a.createElement(G,null),r.a.createElement("div",{className:"info_container"},r.a.createElement(xe,{selectedIndex:n,elements:[{name:"Salas para Reservar",onClick:function(){return o(0)}},{name:"Minhas Reservas",onClick:function(){o(1)}}]}),r.a.createElement(we,null)),r.a.createElement("div",{className:"container_salas"},e.salas.map((function(a,t){return r.a.createElement(de,{sala:a,key:t,onClickDetalhesListener:function(){e.selectSala(a),e.openModal(be.detalhesSala)},addReservaListener:function(t){e.selectDate(t.toDate()),e.selectSala(a),e.openModal(be.reservaCliente)}})}))))})),Oe=(t(203),t(118)),je=(t(204),t(205),function(e){return e.reserva.cancelado?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:e.executado?"container_reserva_cliente executado":"container_reserva_cliente"},r.a.createElement("div",null,r.a.createElement("h1",null,Q()(e.reserva.data).format("DD/MM/YYYY")),r.a.createElement("h4",null,"mes"in e.reserva?r.a.createElement("i",null,"Alugado por todo o M\xeas de ",Q()(e.reserva.mes).locale("pt-BR").format("MMMM")):r.a.createElement("div",null,le(e.reserva.hora_inicio)," ~ ",le(e.reserva.hora_fim)))),r.a.createElement("div",null,r.a.createElement("h4",null,"Sala"),r.a.createElement("h1",null,"sala"in e.reserva?e.reserva.sala.nome:"Sem nome")),r.a.createElement("div",null,r.a.createElement("h4",null,"Situa\xe7\xe3o"),r.a.createElement("h2",null,e.reserva.pago?"Pago":"Pendente")))}),Ce=t(43),Ae=t.n(Ce);t(206);Y.propTypes={onCheck:Ae.a.func.isRequired};var Me=function(e){var a=e.onCheck,t=r.a.useState(!1),n=Object(M.a)(t,2),o=n[0],l=n[1];return r.a.createElement("div",{className:"cancel_checkbox_container"},r.a.createElement("div",{className:o?"cancel_checkbox checked":"cancel_checkbox",onClick:function(){l(!o),a(o)}},r.a.createElement("i",{className:"fas fa-check"})))},De=Object(s.b)((function(e){return{userLogged:e.general.userLogged,mongoClient:e.general.mongoClient,profissionalReservas:e.profissionais.profissionalReservas}}),(function(e){return{setAgendamentos:function(a){return e({type:d.setAgendamentos,payload:a})},setProfissionalReservas:function(a){return e({type:d.setProfissionalReservas,payload:a})}}}))((function(e){var a=r.a.useState(1),t=Object(M.a)(a,2),n=t[0],o=t[1],l=r.a.useState(!1),c=Object(M.a)(l,2),s=c[0],i=c[1],u=r.a.useState([]),d=Object(M.a)(u,2),m=d[0],f=d[1],p=r.a.useState(!1),g=Object(M.a)(p,2),v=g[0],h=g[1],E=Object(O.useHistory)();r.a.useEffect((function(){"nome"in e.userLogged||E.push("/")}));var b=function(){var a=Object(A.a)(C.a.mark((function a(){var t;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.confirm("Voc\xea tem certeza que deseja cancelar esses agendamentos?")){a.next=18;break}return h(!0),a.prev=2,a.next=5,ne.cancelaMuitasReservas(m);case 5:return a.next=7,ne.findAll(e.mongoClient);case 7:t=a.sent,e.setAgendamentos(t),e.setProfissionalReservas(ne.findReservaDeCliente(e.userLogged._id,t)),alert("Cancelamento realizado com sucesso!"),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(2),alert("Erro! Informa\xe7\xf5es: "+a.t0);case 16:h(!1),i(!1);case 18:case"end":return a.stop()}}),a,null,[[2,13]])})));return function(){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"reservas_page_container"},r.a.createElement(G,null),r.a.createElement("div",{className:"info_container"},r.a.createElement(xe,{selectedIndex:n,elements:[{name:"Salas para Reservar",onClick:function(){return o(0)}},{name:"Minhas Reservas",onClick:function(){return o(1)}}]}),r.a.createElement(we,null)),r.a.createElement("div",{className:"container_reservas"},r.a.createElement("div",{className:"flex"},r.a.createElement("h1",{className:"title"},"Minhas Reservas"),r.a.createElement(T,{onClick:function(){i(!s)},className:"cancelar_agendamentos",text:s?"Parar Cancelamento":"Cancelar Agendamentos"})),function(){var a=e.profissionalReservas.filter((function(e){return!e.executado&&!e.cancelado}));return console.log(a),a.length>0?a.map((function(e,a){return r.a.createElement("div",{className:s?"flex flex_margin":"flex"},s?r.a.createElement(Me,{onCheck:function(a){var t;f(a?(t=e,m.filter((function(e){return e!==t}))):[].concat(Object(Oe.a)(m),[e]))}}):r.a.createElement(r.a.Fragment,null),r.a.createElement(je,{reserva:e,key:a}))})):r.a.createElement("h2",{className:"empty_array"},"N\xe3o h\xe1 agendamentos marcados at\xe9 o momento.")}(),s?r.a.createElement(T,{onClick:b,text:"Confirmar Cancelamento",loading:v,className:"cancelar_button"}):r.a.createElement(r.a.Fragment,null),r.a.createElement("h1",{className:"title"},"Hist\xf3rico"),function(){var a=[];return e.profissionalReservas.forEach((function(e){e.executado&&a.push(e)})),a.length>0?a.map((function(e,a){return r.a.createElement(je,{reserva:e,executado:!0,key:a})})):r.a.createElement("h2",{className:"empty_array"},"N\xe3o h\xe1 agendamentos executados at\xe9 o momento.")}()))})),Le=(t(207),t(208),function(e){return r.a.createElement("div",{className:"hamburger_container",onClick:e.onClick},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}),Re=(t(209),[{pageName:"dashboard",pageLabel:"Dashboard"},{pageName:"agendamento_adm",pageLabel:"Agendamentos"},{pageName:"administrativo",pageLabel:"Administrativo"},{pageName:"logs",pageLabel:"Logs"},{pageName:"Salas",pageLabel:"Salas"},{pageName:"profissionais",pageLabel:"Profissionais"}]),Pe=function(e){var a=e.pageSelected,t=e.onClick,n=e.open,o=Object(O.useHistory)();return r.a.createElement("div",{className:"responsive_menu "+(n?"open":"")},r.a.createElement("ul",null,Re.map((function(e,n){return r.a.createElement("li",{key:n,onClick:function(){t(),o.push(e.pageName)},className:a===e.pageName?"selected":""},e.pageLabel)}))))},Te=function(e){var a=Object(O.useHistory)();return r.a.createElement("div",{onClick:function(){a.push("/"+e.page)},className:"tab "+(e.selected?"selected":"")},r.a.createElement("p",null,e.children))},Ye=Object(s.b)((function(e){return{userLogged:e.general.userLogged}}),(function(e){return{setUserLogged:function(a){return e({type:d.setUserLogged,payload:a})}}}))((function(e){var a=e.pageSelected,n=e.userLogged,o=e.setUserLogged,l=r.a.useState(!1),c=Object(M.a)(l,2),s=c[0],i=c[1],u=Object(O.useHistory)();return r.a.createElement("div",{className:"topbar_container topbar_container_adm"},r.a.createElement(Le,{onClick:function(){return i(!0)}}),r.a.createElement(Pe,{open:s,pageSelected:a,onClick:function(){return i(!1)}}),r.a.createElement("div",{className:"img_container"},r.a.createElement("img",{alt:"integra_logo",src:t(121)})),r.a.createElement("div",{className:"tabs"},r.a.createElement(Te,{page:"dashboard",selected:"dashboard"===a},"Dashboard"),r.a.createElement(Te,{page:"agendamento_adm",selected:"agendamento_adm"===a},"Agendamentos"),r.a.createElement(Te,{page:"profissionais",selected:"profissionais"===a},"Profissionais"),r.a.createElement(Te,{page:"administrativo",selected:"administrativo"===a},"Administrativo"),r.a.createElement(Te,{page:"salas",selected:"salas"===a},"Salas"),r.a.createElement(Te,{page:"logs",selected:"logs"===a},"Logs")),r.a.createElement("div",{className:"user_data"},r.a.createElement("div",null,r.a.createElement("h2",null,n?n.nome:"Catherine Torres"),r.a.createElement("h4",null,"Administrador"))),r.a.createElement("img",{alt:"profile_pic",className:"profile_pic",src:n?n.foto_url:"https://randomuser.me/api/portraits/women/43.jpg"}),r.a.createElement(T,{onClick:function(){o({}),localStorage.removeItem("email"),localStorage.removeItem("pwd"),u.push("/")},width:"5%",text:r.a.createElement("i",{className:"fas fa-door-open"}),className:"log-off"}))})),Fe=(t(210),Object(Z.extendMoment)(K.a)),He=function(){for(var e=[],a=0;a<13;a++)e.push({label:a+9+":00",value:a+9});return e}(),Ue=Object(s.b)((function(e){return{salas:e.salas.salas,agendamentos:e.agendamentos.agendamentos,dateSelected:e.general.dateSelected}}),(function(e){return{selectDate:function(a){return e({type:d.selectDate,payload:a})},openModal:function(a){return e({type:d.showModal,payload:a})},setSalas:function(a){return e({type:d.setSalas,payload:a})},selectAgendamentos:function(a){return e({type:d.selectAgendamentos,payload:a})},selectSala:function(a){return e({type:d.selectSala,payload:a})}}}))((function(e){return r.a.createElement("div",{className:"calendar_agendamentos_container"},r.a.createElement("h1",null,r.a.createElement("span",{onClick:function(){e.selectDate(Fe(e.dateSelected).subtract(1,"day").toDate())},className:"chevron_date",style:{float:"left"}},r.a.createElement("i",{className:"fa fa-chevron-left"})),Fe(e.dateSelected).locale("pt-BR").format(" DD MMMM YYYY"),r.a.createElement("span",{onClick:function(){e.selectDate(Fe(e.dateSelected).add(1,"day").toDate())},className:"chevron_date",style:{float:"right"}},r.a.createElement("i",{className:"fa fa-chevron-right"}))),r.a.createElement("div",{className:"container_table"},r.a.createElement("table",{className:"calendar_table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"10%"}}),e.salas.map((function(e,a){return r.a.createElement("th",{key:a},e.nome)})))),r.a.createElement("tbody",null,He.map((function(a,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,a.label),e.salas.map((function(t,n){var o=ne.getAgendamentosFromSala(e.agendamentos,t),l=!1,c=!1,s=null;return o.forEach((function(t,n){var r,o,i;"hora_inicio"in t?(r=a.value,o=t.hora_inicio,i=t.hora_fim,r>=o&&r<i&&Fe(e.dateSelected).isSame(new Date(t.data),"day")&&!t.cancelado&&(l=!0,s=t,console.log(s))):"mes"in t&&Fe(t.mes).isSame(e.dateSelected,"month")&&(c=!0)})),l?s?c?r.a.createElement("td",{key:n,className:"occupied"},s?s.profissional?s.profissional.nome:r.a.createElement("i",null,"Usu\xe1rio Exclu\xeddo"):""):s.hora_inicio===a.value?r.a.createElement("td",{onClick:function(){e.openModal(be.editarAgendamento),e.selectAgendamentos(s)},key:n,rowSpan:s.hora_fim-s.hora_inicio,className:"occupied"},s?s.profissional?s.profissional.nome:r.a.createElement("i",null,"Usu\xe1rio Exclu\xeddo"):""):r.a.createElement(r.a.Fragment,null):void 0:c?r.a.createElement("td",{key:n,className:"alugado"},r.a.createElement("i",null,"Alugado Mensalmente")):r.a.createElement("td",{key:n,className:"free",onClick:function(){e.openModal(be.adicionarAgendamentoAdm),e.selectSala(t)}},r.a.createElement("i",{className:"fa fa-plus"}))})))}))))))})),Ie=(t(211),t(212),Object(s.b)((function(e){return{mongoClient:e.general.mongoClient,profissionais:e.profissionais.profissionais,salaSelected:e.agendamentos.salaSelected,dateSelected:e.general.dateSelected}}))((function(e){var a=e.profissionais,t=e.selectProf,n=e.salaSelected,o=e.dateSelected,l=function(){return 6===o.getDay()},c=function(e){for(var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=[],n=e;n<(a?l()?13:21:l()?12:20);n++)t.push({label:n+":00",value:n});return t},s=r.a.useState([]),i=Object(M.a)(s,2),u=i[0],d=i[1],m=r.a.useState(0),f=Object(M.a)(m,2),p=f[0],g=f[1],v=r.a.useState(0),h=Object(M.a)(v,2),E=h[0],b=h[1],y=r.a.useState(c(9,!0)),S=Object(M.a)(y,2),_=S[0],x=S[1];return r.a.useEffect((function(){var e=[];a.forEach((function(a){e.push({label:a.nome,value:a})})),d(e)}),[a]),r.a.createElement("div",null,r.a.createElement("div",{className:"select_profissionais_container"},r.a.createElement(me.a,{required:!0,name:"profissional",onChange:function(e){t(e.value)},style:{marginLeft:"5%",marginRight:"5%"},placeholder:"Profissional",options:u})),r.a.createElement("div",{className:"horas_intervalo"},r.a.createElement("div",null,r.a.createElement("h2",null,"Hora Inicial"),r.a.createElement(me.a,{name:"hora_inicio",onChange:function(e){x(c(e.value+1,!0)),g(e.value)},classNamePrefix:"Select",options:c(9)})),r.a.createElement("div",null,r.a.createElement("h2",null,"Hora Final"),r.a.createElement(me.a,{onChange:function(e){return b(e.value)},name:"hora_fim",classNamePrefix:"Select",options:_}))),r.a.createElement("div",{className:"resume_container"},r.a.createElement("div",null,r.a.createElement("h2",null,"Valor/Hora"),r.a.createElement("h3",null,oe(n.valor_hora))),r.a.createElement("div",null,r.a.createElement("h2",null,"Valor Total:"),r.a.createElement("h3",null,oe(0===E?0:n.valor_hora*(E-p))))))}))),qe=Object(s.b)((function(e){return{profissionais:e.profissionais.profissionais}}))((function(e){var a=r.a.useState([]),t=Object(M.a)(a,2),n=t[0],o=t[1];r.a.useEffect((function(){var a=[];e.profissionais.forEach((function(e){a.push({label:e.nome,value:e})})),o(a)}),[e.profissionais]);return r.a.createElement("div",null,r.a.createElement("div",{className:"select_profissionais_container"},r.a.createElement(me.a,{placeholder:"Profissional",classNamePrefix:"Select",options:n}),r.a.createElement("h2",null,"Dura\xe7\xe3o do Turno"),r.a.createElement(me.a,{placeholder:"Selecione o Hor\xe1rio do Turno",options:[{label:"08:00h \xe0s 13:00h",value:"08:00h \xe0s 13:00h"},{label:"14:00h \xe0s 18:00h",value:"14:00h \xe0s 18:00h"},{label:"15:00h \xe0s 19:00h",value:"15:00h \xe0s 19:00h"},{label:"16:00h \xe0s 20:00h",value:"16:00h \xe0s 20:00h"}]}),r.a.createElement("div",{className:"resume_container"},r.a.createElement("div",null,r.a.createElement("h2",null,"Valor/Hora"),r.a.createElement("h3",null,"R$39,90")),r.a.createElement("div",null,r.a.createElement("h2",null,"Valor Total:"),r.a.createElement("h3",null,"R$139,90")))))})),Ve=Object(s.b)((function(e){return{profissionais:e.profissionais.profissionais}}))((function(e){var a=r.a.useState([]),t=Object(M.a)(a,2),n=t[0],o=t[1],l=r.a.useState([]),c=Object(M.a)(l,2),s=c[0],i=c[1];return r.a.useEffect((function(){var a=[];e.profissionais.forEach((function(e){a.push({label:e.nome,value:e})}));for(var t=[],n=0;n<3;n++)t.push({label:K()(new Date).locale("pt-BR").add(n,"month").format(" MMMM / YYYY"),value:K()(new Date).locale("pt-BR").add(n,"month").format(" MMMM / YYYY")});i(t),o(a)}),[e.profissionais]),r.a.createElement("div",null,r.a.createElement("div",{className:"select_profissionais_container"},r.a.createElement(me.a,{style:{marginLeft:"5%",marginRight:"5%"},placeholder:"Profissional",options:n}),r.a.createElement("h2",null,"M\xeas a ser Solicitado"),r.a.createElement(me.a,{style:{marginLeft:"5%",marginRight:"5%"},placeholder:"M\xeas a ser solicitado",options:s})),r.a.createElement("div",{className:"resume_container"},r.a.createElement("div",null,r.a.createElement("h2",null,"Valor/Hora"),r.a.createElement("h3",null,"R$39,90")),r.a.createElement("div",null,r.a.createElement("h2",null,"Valor Total:"),r.a.createElement("h3",null,"R$139,90"))))})),Be=function(e){var a=r.a.useState("Hora Avulsa"),t=Object(M.a)(a,2),n=t[0],o=t[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"options"},r.a.createElement("div",{onClick:function(){return o("Hora Avulsa")},className:"Hora Avulsa"===n?"option selected":"option"},r.a.createElement("p",null,"Hora Avulsa")),r.a.createElement("div",{onClick:function(){return o("Turno")},className:"Turno"===n?"option selected":"option"},r.a.createElement("p",null,"Turno")),r.a.createElement("div",{onClick:function(){return o("Mensal")},className:"Mensal"===n?"option selected":"option"},r.a.createElement("p",null,"Mensal"))),function(a){switch(a){case"Hora Avulsa":return r.a.createElement(Ie,{selectProf:e.selectProf});case"Turno":return r.a.createElement(qe,null);case"Mensal":return r.a.createElement(Ve,null);default:return r.a.createElement(r.a.Fragment,null)}}(n))},ze=Object(s.b)((function(e){return{mongoClient:e.general.mongoClient,dateSelected:e.general.dateSelected,salaSelected:e.agendamentos.salaSelected,userLogged:e.general.userLogged,agendamentos:e.agendamentos.agendamentos}}),(function(e){return{closeModal:function(){return e({type:d.closeModal})},setAgendamentos:function(a){return e({type:d.setAgendamentos,payload:a})}}}))((function(e){var a=e.show,t=e.close,n=e.mongoClient,o=e.dateSelected,l=e.salaSelected,c=e.userLogged,s=e.agendamentos,i=e.setAgendamentos,u=r.a.useState({}),d=Object(M.a)(u,2),m=d[0],f=d[1],p=r.a.useState(!1),g=Object(M.a)(p,2),v=g[0],h=g[1],E=function(){var e=Object(A.a)(C.a.mark((function e(a){var r,u,d;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),r=a.target,u=m,h(!0),d={profissional_id:u._id,hora_inicio:Number(r.hora_inicio.value),hora_fim:Number(r.hora_fim.value),sala_id:l._id,data:K()(o).toDate(),valorTotal:Number((l.valor_hora*(Number(r.hora_fim.value)-Number(r.hora_inicio.value))).toFixed(2)),cancelado:!1,pago:!1,executado:!1},!("_id"in m)){e.next=10;break}return e.next=8,ne.createHoraAvulsa(d,s,o,Object(A.a)(C.a.mark((function e(){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.create(d,c);case 2:return e.next=4,ne.findAll(n);case 4:a=e.sent,i(a),h(!1),alert("Adicionado com sucesso!"),t();case 9:case"end":return e.stop()}}),e)}))),(function(){alert("Erro! O hor\xe1rio j\xe1 se encontra reservado ou hor\xe1rio inv\xe1lido."),h(!1),t()}));case 8:e.next=12;break;case 10:alert("Por favor, selecione um profissional."),h(!1);case 12:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(q,{show:a,onSubmit:E,header:r.a.createElement("header",null,r.a.createElement("div",null,r.a.createElement("h1",null,"Adicionar Reserva"),r.a.createElement("h3",null,K()(o).locale("pt-BR").format("DD [de] MMMM [de] YYYY")," - ",l.nome)),r.a.createElement("div",{className:"close_container",onClick:t},r.a.createElement("i",{className:"fa fa-times"}))),body:r.a.createElement("div",null,r.a.createElement(Be,{selectProf:f})),footer:r.a.createElement("div",{className:"footer"},r.a.createElement(T,{loading:v,type:"submit",text:"Confirmar"}))})})),$e=(t(213),Object(s.b)((function(e){return{agendamentoSelected:e.agendamentos.agendamentoSelected,dateSelected:e.general.dateSelected,mongoClient:e.general.mongoClient}}),(function(e){return{setAgendamentos:function(a){return e({type:d.setAgendamentos,payload:a})},selectAgendamentos:function(a){return e({type:d.selectAgendamentos,payload:a})}}}))((function(e){var a=r.a.useState(!1),t=Object(M.a)(a,2),n=t[0],o=t[1],l=r.a.useState(!1),c=Object(M.a)(l,2),s=c[0],i=c[1],u=r.a.useState(!1),d=Object(M.a)(u,2),m=d[0],f=d[1],p=r.a.useState(!1),g=Object(M.a)(p,2),v=g[0],h=g[1];r.a.useEffect((function(){i("execucao_inicio"in e.agendamentoSelected&&!("execucao_fim"in e.agendamentoSelected)),f("execucao_inicio"in e.agendamentoSelected&&"execucao_fim"in e.agendamentoSelected),h(e.agendamentoSelected.pago)}),[e]);var E=function(){var a=Object(A.a)(C.a.mark((function a(){var t;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ne.findAll(e.mongoClient);case 2:t=a.sent,e.setAgendamentos(t),e.selectAgendamentos(ne.getAgendamentosById(t,e.agendamentoSelected._id));case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.a.createElement(q,{show:e.show,header:r.a.createElement("header",null,r.a.createElement("div",null,r.a.createElement("h1",null,"Editar Reserva"),r.a.createElement("h3",null,"profissional"in e.agendamentoSelected?e.agendamentoSelected.profissional.nome+" - "+Q()(e.dateSelected).locale("pt-BR").format("DD MMMM [de] YYYY"):"")),r.a.createElement("div",{className:"close_container",onClick:e.close},r.a.createElement("i",{className:"fa fa-times"}))),body:r.a.createElement("div",{className:"body_edit_agendamento"},r.a.createElement("h2",null,"Execu\xe7\xe3o"),r.a.createElement("h3",null,m?"Reserva j\xe1 foi finalizada. In\xedcio \xe0s ".concat(Q()(e.agendamentoSelected.execucao_inicio).format("HH:mm"),", e fim \xe0s ").concat(Q()(e.agendamentoSelected.execucao_fim).format("HH:mm")):s?"Reserva est\xe1 sendo executada":"Reserva ainda n\xe3o executada",r.a.createElement("br",null),r.a.createElement("br",null),m?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(T,{onClick:Object(A.a)(C.a.mark((function a(){return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o(!0),!s){a.next=9;break}return a.next=4,ne.executaReserva(e.agendamentoSelected._id);case 4:return a.next=6,E();case 6:alert("Execu\xe7\xe3o Finalizada com Sucesso!"),a.next=13;break;case 9:return a.next=11,ne.comecaReserva(e.agendamentoSelected._id);case 11:return a.next=13,E();case 13:o(!1);case 14:case"end":return a.stop()}}),a)}))),type:"button",text:"execucao_inicio"in e.agendamentoSelected?"Finalizar":"Iniciar",loading:n,width:"30%"})," \xa0 \xa0",r.a.createElement(T,{text:"Cancelar Reserva",width:"45%",onClick:Object(A.a)(C.a.mark((function a(){return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.confirm("Tem certeza que deseja cancelar a reserva?")){a.next=4;break}return a.next=3,ne.cancelaReserva(e.agendamentoSelected._id);case 3:e.close();case 4:case"end":return a.stop()}}),a)})))}))),r.a.createElement("h2",null,"Pagamento"),r.a.createElement("h3",null,v?"Reserva j\xe1 foi paga.":"Reserva ainda n\xe3o foi paga."," ",r.a.createElement("br",null),r.a.createElement("br",null),v?r.a.createElement(r.a.Fragment,null):r.a.createElement(T,{onClick:Object(A.a)(C.a.mark((function a(){return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o(!0),a.next=3,ne.pagaReserva(e.agendamentoSelected._id,!0);case 3:return a.next=5,E();case 5:o(!1);case 6:case"end":return a.stop()}}),a)}))),loading:n,type:"button",text:"Pagar",width:"45%"}),v?r.a.createElement(T,{onClick:Object(A.a)(C.a.mark((function a(){return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o(!0),a.next=3,ne.pagaReserva(e.agendamentoSelected._id,!1);case 3:return a.next=5,E();case 5:o(!1);case 6:case"end":return a.stop()}}),a)}))),text:"Desfazer",width:"45%"}):r.a.createElement(r.a.Fragment,null))),footer:r.a.createElement("div",{className:"footer footer_edit_agendamento"},"sala"in e.agendamentoSelected?r.a.createElement("div",{className:"flex crud_ops"},r.a.createElement(T,{text:"Cancelar",type:"button",onClick:Object(A.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}),r.a.createElement(T,{className:"submit",loading:n,type:"submit",text:"Confirmar"})):r.a.createElement(r.a.Fragment,null))})}))),Ge=Object(s.b)((function(e){return{showModal:e.general.showModal,modalType:e.general.modalType,database:e.general.database,userLogged:e.general.userLogged,client:e.general.mongoClient}}),(function(e){return{openModal:function(a){return e({type:d.showModal,payload:a})},closeModal:function(){return e({type:d.closeModal})},setProfissionais:function(a){return e({type:d.setProfissionais,payload:a})},setSalas:function(a){return e({type:d.setSalas,payload:a})},setAgendamentos:function(a){return e({type:d.setAgendamentos,payload:a})},setLogs:function(a){return e({type:d.setLogs,payload:a})}}}))((function(e){var a=Object(O.useHistory)(),t=function(){var a=Object(A.a)(C.a.mark((function a(){return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.database.collection("reservas").watch();case 2:a.sent.onNext((function(a){ne.findAll(e.client).then((function(a){e.setAgendamentos(a)}))}));case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.a.useEffect((function(){e.database&&t().then((function(){return console.log("connection established")}))}),[e.database]),r.a.useEffect((function(){H.db&&("ocupacao"in e.userLogged&&a.push("/"),H.findAll().then((function(a){e.setProfissionais(a)})),ke.findAll().then((function(a){var t=a.sort((function(e,a){var t=[e.nome.split(" "),a.nome.split(" ")],n=t[0],r=t[1];return+n[1]>+r[1]?1:+n[1]<+r[1]?-1:0}));e.setSalas(t)})),ne.findAll(e.client).then((function(a){e.setAgendamentos(a)})),J.findAll().then((function(a){e.setLogs(a)})))}),[]),"nome"in e.userLogged?r.a.createElement("div",null,r.a.createElement(Ye,{pageSelected:"agendamento_adm"}),r.a.createElement("div",{className:"container_salas"},r.a.createElement(ze,{close:function(){return e.closeModal()},show:e.showModal&&e.modalType===be.adicionarAgendamentoAdm}),r.a.createElement($e,{close:function(){return e.closeModal()},show:e.showModal&&e.modalType===be.editarAgendamento}),r.a.createElement(Ue,null))):r.a.createElement(O.Redirect,{to:"/"})})),We=t(168),Qe=t(95),Je=(t(214),Object(s.b)((function(e){return{profissionais:e.profissionais.profissionais,agendamentos:e.agendamentos.agendamentos,userLogged:e.general.userLogged,administradores:e.administradores.administradores}}))((function(e){var a=r.a.useState([]),t=Object(M.a)(a,2),n=t[0],o=t[1],l=r.a.useState([]),c=Object(M.a)(l,2),s=(c[0],c[1]);r.a.useEffect((function(){for(var a=[],t=0;t<e.agendamentos.length;t++)!e.agendamentos[t].cancelado&&e.agendamentos[t].executado&&a.push(e.agendamentos[t]);o(a)}),[e]);var i=r.a.useState([]),u=Object(M.a)(i,2),d=u[0],m=u[1];return r.a.useEffect((function(){for(var a=[],t=0;t<e.agendamentos.length;t++)e.agendamentos[t].cancelado&&a.push(e.agendamentos[t]);m(a)}),[e]),r.a.useEffect((function(){s(e.agendamentos.filter((function(e){return!e.cancelado})));for(var a=[],t=I()("2020/03/01","YYYY/MM/DD");!I()(new Date).isSame(t,"day");)a.push({date:t.toDate(),value:0}),t.add(1,"day");var n={};e.agendamentos.forEach((function(e){I()(new Date(e.data)).format("DD/MM/YYYY")in n?n[I()(new Date(e.data)).format("DD/MM/YYYY")]+=1:n[I()(new Date(e.data)).format("DD/MM/YYYY")]=0})),Object.keys(n).forEach((function(e){for(var t=0;t<a.length;t++)if(I()(a[t].date).isSame(I()(e,"DD/MM/YYYY"),"day")){a[t].value=n[e];break}}));var r=We.a("chart_agendamentos",Qe.d);r.paddingRight=20,r.data=a,r.xAxes.push(new Qe.a).renderer.grid.template.location=0;var o=r.yAxes.push(new Qe.c);o.tooltip.disabled=!0,o.renderer.minWidth=35;var l=r.series.push(new Qe.b);l.dataFields.dateX="date",l.dataFields.valueY="value",l.tooltipText="{valueY.value}",r.cursor=new Qe.f;var c=new Qe.e;c.series.push(l),r.scrollbarX=c}),[]),"nome"in e.userLogged?r.a.createElement("div",null,r.a.createElement(Ye,{pageSelected:"dashboard"}),r.a.createElement("div",{className:"indicators_container"},r.a.createElement("div",null,r.a.createElement("h5",null,"5,25% ",r.a.createElement("i",{className:"fa fa-arrow-up"})," \xa0 que no m\xeas anterior"),r.a.createElement("h2",null,n.length," reservas no m\xeas")),r.a.createElement("div",null,r.a.createElement("h2",null,d.length," reservas canceladas"),r.a.createElement("h5",null,"5,25% ",r.a.createElement("i",{className:"fa fa-arrow-up"})," \xa0 que no m\xeas anterior"))),r.a.createElement("div",{className:"bottom_column"},r.a.createElement("div",{className:"agendamentos_chart_container"},r.a.createElement("h2",null,"Agendamentos"),r.a.createElement("div",{id:"chart_agendamentos"})),r.a.createElement("div",{className:"quickdetails_container"},r.a.createElement("h2",null,"Informa\xe7\xf5es"),r.a.createElement("h3",null,e.profissionais.length," Novos Profissionais"),r.a.createElement("h3",null,e.agendamentos.length," agendamentos"),r.a.createElement("h3",null,e.profissionais.length+e.administradores.length," usu\xe1rios cadastrados"),r.a.createElement("h3",null,n.length," agendamentos at\xe9 o momento"),r.a.createElement("h3",null,"5 pacientes para profissionais"),r.a.createElement("h3",null,d.length," cancelamentos")))):r.a.createElement(O.Redirect,{to:"/"})}))),Xe=(t(215),function(e){return r.a.createElement("div",{className:"card_log"},r.a.createElement("img",{alt:"Profile_pic",className:"profile_pic",src:e.log.usuario.foto_url}),r.a.createElement("div",null,r.a.createElement("h3",null,e.log.usuario.nome),r.a.createElement("h1",null,e.log.log)),r.a.createElement("div",null,r.a.createElement("h4",null,Q()(new Date(e.log.data_hora)).locale("pt-BR").format(" DD/MM/YYYY HH:mm"))))}),Ke=(t(216),Object(s.b)((function(e){return{logs:e.logs.logs,userLogged:e.general.userLogged}}))((function(e){var a=Object(O.useHistory)();return"ocupacao"in e.userLogged&&a.push("/"),r.a.createElement("div",null,r.a.createElement(Ye,{pageSelected:"logs"}),r.a.createElement("div",{className:"logs"},0===e.logs.length?r.a.createElement("h2",{style:{color:"#888"}},"Ainda n\xe3o h\xe1 logs para exibir."):e.logs.map((function(e){return r.a.createElement(Xe,{log:e})}))))}))),Ze=(t(217),Object(s.b)(null,(function(e){return{openModal:function(a){return e({type:d.showModal,payload:a})},selectProfissional:function(a){return e({type:d.selectProfissional,payload:a})}}}))((function(e){return r.a.createElement("div",{className:"card_profissional"},r.a.createElement("img",{alt:"profissional_pic",src:e.profissional.foto_url}),r.a.createElement("h2",null,e.profissional.nome),r.a.createElement("h3",null,e.profissional.ocupacao),r.a.createElement(T,{text:"Informa\xe7\xf5es",onClick:function(){e.selectProfissional(e.profissional),e.openModal(be.adicionarProfissional)}}))}))),ea=(t(218),t(219),Object(s.b)(null,(function(e){return{selectAdministrador:function(){return e({type:d.selectAdministrador,payload:{}})}}}))((function(e){return r.a.createElement("div",{className:e.open?"Fab open":"Fab",onClick:function(){e.onClick(e.open),e.selectAdministrador()}},r.a.createElement("i",{className:"fa fa-plus"}))}))),aa=(t(220),t(221),function(e){var a=r.a.createRef(),n=r.a.useState("Nenhum arquivo selecionado."),o=Object(M.a)(n,2),l=o[0],c=o[1],s=r.a.useState(""),i=Object(M.a)(s,2),u=i[0],d=i[1],m=function(a){a.target.files?a.target.files[0]?(c(a.target.files[0].name),d(URL.createObjectURL(a.target.files[0])),e.onChangeFile(a.target.files[0],"https://teste.integracps.com.br/uploads/"+a.target.files[0].name)):(d(""),c("Nenhum arquivo selecionado.")):(e.onChangeFile(null,a.target.value),d(a.target.value))},f=r.a.useState(!1),p=Object(M.a)(f,2),g=p[0],v=p[1];return r.a.createElement("div",{className:"preview_input_container"},r.a.createElement("div",{className:"file_input_container"},r.a.createElement("img",{alt:"Preview",src:""===u?t(222):u}),r.a.createElement("input",{type:"file",name:e.fileName,id:"real_file",onChange:m,hidden:!0,accept:"image/png, image/jpeg, image/jpg, image/gif",ref:a}),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{disabled:g,onClick:function(){return v(!0)},className:g?"button_secondary selected":"button_secondary"},"URL"),r.a.createElement("button",{disabled:!g,onClick:function(){return v(!1)},className:g?"button_secondary":"button_secondary selected"},"Arquivo")),r.a.createElement("div",{className:"arquivo_upload",style:g?{display:"none"}:{}},r.a.createElement("button",{type:"button",onClick:function(){a.current.click()}},r.a.createElement("i",{className:"fa fa-upload"})),r.a.createElement("span",null,l)),r.a.createElement(P,{name:e.urlName,style:g?{width:"100%"}:{display:"none"},label:"URL da foto",onChange:m})))}),ta=t(107),na=Object(s.b)((function(e){return{mongoClient:e.general.mongoClient,profissionalSelected:e.profissionais.profissionalSelected}}),(function(e){return{closeModal:function(){return e({type:d.closeModal})},setProfissionais:function(a){return e({type:d.setProfissionais,payload:a})},selectProfissional:function(){return e({type:d.selectProfissional,payload:{}})}}}))((function(e){var a=e.show,t=e.close,n=e.mongoClient,o=e.closeModal,l=e.setProfissionais,c=e.profissionalSelected,s=e.selectProfissional,i=r.a.useState(!1),u=Object(M.a)(i,2),d=u[0],m=u[1],f=r.a.useState(null),p=Object(M.a)(f,2),g=p[0],v=p[1],h=r.a.useState(!1),E=Object(M.a)(h,2),b=E[0],y=E[1],S=r.a.useState(""),_=Object(M.a)(S,2),x=_[0],w=_[1],k=function(){var e=Object(A.a)(C.a.mark((function e(a){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://teste.integracps.com.br/imageUpload.php",(t=new FormData).append("userfile",a),n={headers:{"content-type":"multipart/form-data"}},e.abrupt("return",Object(ta.post)("https://teste.integracps.com.br/imageUpload.php",t,n));case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),N=function(){var e=Object(A.a)(C.a.mark((function e(a){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==x){e.next=17;break}return e.prev=1,e.next=4,H.addUser(n,a.email.value,a.senha.value,{nome:a.nome.value,telefone:a.telefone.value,ocupacao:a.ocupacao.value,descricao:a.descricao.value,foto_url:"https://jsl-online.com/wp-content/uploads/2017/01/placeholder-user.png",email:a.email.value});case 4:return e.t0=l,e.next=7,H.findAll();case 7:e.t1=e.sent,(0,e.t0)(e.t1),alert("Profissional Adicionado com Sucesso!"),e.next=15;break;case 12:e.prev=12,e.t2=e.catch(1),alert(e.t2);case 15:e.next=37;break;case 17:if(!re(x)){e.next=36;break}return e.prev=18,e.next=21,k(g);case 21:return e.next=23,H.addUser(n,a.email.value,a.senha.value,{nome:a.nome.value,telefone:a.telefone.value,ocupacao:a.ocupacao.value,descricao:a.descricao.value,foto_url:x,email:a.email.value});case 23:return e.t3=l,e.next=26,H.findAll();case 26:e.t4=e.sent,(0,e.t3)(e.t4),alert("Profissional Adicionado com Sucesso!"),e.next=34;break;case 31:e.prev=31,e.t5=e.catch(18),alert(e.t5);case 34:e.next=37;break;case 36:alert("Informe uma imagem v\xe1lida acima. Caso n\xe3o queira adicionar uma imagem, deixe o campo em branco.");case 37:case"end":return e.stop()}}),e,null,[[1,12],[18,31]])})));return function(a){return e.apply(this,arguments)}}(),O=function(){var e=Object(A.a)(C.a.mark((function e(a){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.update({_id:c._id},{nome:a.nome.value,telefone:a.telefone.value,ocupacao:a.ocupacao.value,descricao:a.descricao.value,email:a.email.value});case 3:return e.next=5,H.findAll();case 5:t=e.sent,l(t),s(),alert("Profissional editado com Sucesso!"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),alert(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(a){return e.apply(this,arguments)}}(),j=function(){var e=Object(A.a)(C.a.mark((function e(){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.delete({_id:c._id});case 3:return e.next=5,H.findAll();case 5:a=e.sent,l(a),alert("Profissional removido com sucesso"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(A.a)(C.a.mark((function e(a){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),m(!0),t=a.target,b){e.next=20;break}if(t.senha.value===t.confirmar_senha.value){e.next=8;break}alert("Confirma\xe7\xe3o de senha n\xe3o \xe9 igual a senha definida."),e.next=18;break;case 8:if(!(t.senha.value.length<6&&t.senha.value.length>128)){e.next=12;break}alert("A senha necessita conter entre 6 e 128 caracteres."),e.next=18;break;case 12:return e.next=14,N(t);case 14:s(),y(!1),t.reset(),o();case 18:e.next=26;break;case 20:return e.next=22,O(t);case 22:s(),y(!1),t.reset(),o();case 26:m(!1);case 27:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(q,{show:a,onSubmit:D,header:r.a.createElement("header",null,r.a.createElement("div",null,r.a.createElement("h1",null,"nome"in c?"Informa\xe7\xf5es do Profissional":"Adicionar Profissional")),r.a.createElement("div",{className:"close_container",onClick:function(){t(),s(),y(!1)}},r.a.createElement("i",{className:"fa fa-times"}))),body:r.a.createElement("div",null,r.a.createElement(aa,{onChangeFile:function(e,a){v(e),w(a)},urlName:"foto_url",fileName:"userfile"}),r.a.createElement(P,{disabled:"nome"in c&&!b,defaultValue:c.nome,required:!0,name:"nome",label:"Nome"}),r.a.createElement("div",{className:"flex"},r.a.createElement(P,{disabled:"nome"in c&&!b,defaultValue:c.telefone,required:!0,name:"telefone",label:"Telefone"}),r.a.createElement(P,{disabled:"nome"in c&&!b,defaultValue:c.ocupacao,name:"ocupacao",label:"Ocupa\xe7\xe3o"})),r.a.createElement(P,{required:!0,disabled:"nome"in c&&!b,defaultValue:c.descricao,name:"descricao",label:"Descri\xe7\xe3o"}),r.a.createElement(P,{name:"email",required:!0,disabled:"nome"in c&&!b,defaultValue:c.email,label:"Email",placeholder:"E-mail utilizado para Login"}),"email"in c?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"flex"},r.a.createElement(P,{label:"Senha",name:"senha",type:"password",required:!0}),r.a.createElement(P,{name:"confirmar_senha",label:"Confirmar Senha",type:"password",required:!0}))),footer:r.a.createElement("div",{className:"footer"},"nome"in c?r.a.createElement("div",{className:"flex crud_ops"},r.a.createElement(T,{text:"Remover",type:"button",onClick:Object(A.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Tem certeza que deseja apagar esse profissional do sistema?")){e.next=6;break}return e.next=3,j();case 3:o(),s(),y(!1);case 6:case"end":return e.stop()}}),e)})))}),r.a.createElement(T,{editing:b,onClick:function(){return y(!0)},text:"Editar",type:"button"})):r.a.createElement(r.a.Fragment,null),r.a.createElement(T,{loading:d,type:"submit",text:"Confirmar"}))})})),ra=Object(s.b)((function(e){return{showModal:e.general.showModal,modalType:e.general.modalType,client:e.general.mongoClient,userLogged:e.general.userLogged,profissionais:e.profissionais.profissionais}}),(function(e){return{closeModal:function(){return e({type:d.closeModal})},openModal:function(a){return e({type:d.showModal,payload:a})},setProfissionais:function(a){return e({type:d.setProfissionais,payload:a})}}}))((function(e){var a=Object(O.useHistory)();return r.a.useEffect((function(){"ocupacao"in e.userLogged&&a.push("/"),H.db&&H.findAll().then((function(a){e.setProfissionais(a)}))}),[e.client]),r.a.createElement("div",null,r.a.createElement(na,{close:function(){return e.closeModal()},show:e.showModal&&e.modalType===be.adicionarProfissional}),r.a.createElement(Ye,{pageSelected:"profissionais"}),r.a.createElement("div",{className:"profissionais_container"},e.profissionais.map((function(e){return r.a.createElement(Ze,{profissional:e})}))),r.a.createElement(ea,{onClick:function(){e.openModal(be.adicionarProfissional)}}))})),oa=(t(239),t(240),Object(s.b)(null,(function(e){return{openModal:function(a){return e({type:d.showModal,payload:a})},selectAdministrador:function(a){return e({type:d.selectAdministrador,payload:a})}}}))((function(e){return r.a.createElement("div",{className:"card_administrativo"},r.a.createElement("img",{alt:"administrativo_pic",src:e.administrador.foto_url}),r.a.createElement("h2",null,e.administrador.nome),r.a.createElement(T,{text:"Informa\xe7\xf5es",onClick:function(){e.selectAdministrador(e.administrador),e.openModal(be.adicionarAdministrador)}}))}))),la=(t(241),Object(s.b)((function(e){return{mongoClient:e.general.mongoClient,administradorSelected:e.administradores.administradorSelected}}),(function(e){return{setAdministrativo:function(a){return e({type:d.setAdministrativo,payload:a})},closeModal:function(){return e({type:d.closeModal})},unselectAdministrativo:function(){return e({type:d.selectAdministrador,payload:{}})}}}))((function(e){var a=e.show,t=e.close,n=e.mongoClient,o=e.closeModal,l=e.administradorSelected,c=void 0===l?{}:l,s=e.setAdministrativo,i=e.unselectAdministrativo,u=r.a.useState(!1),d=Object(M.a)(u,2),m=d[0],f=d[1],p=r.a.useState(null),g=Object(M.a)(p,2),v=g[0],h=g[1],E=r.a.useState(""),b=Object(M.a)(E,2),y=b[0],S=b[1],_=r.a.useState(!1),x=Object(M.a)(_,2),w=x[0],k=x[1];r.a.useEffect((function(){k(!1)}),[]);var N=function(){var e=Object(A.a)(C.a.mark((function e(a){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://teste.integracps.com.br/imageUpload.php",(t=new FormData).append("userfile",a),n={headers:{"content-type":"multipart/form-data"}},e.abrupt("return",Object(ta.post)("https://teste.integracps.com.br/imageUpload.php",t,n));case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),O=function(){var e=Object(A.a)(C.a.mark((function e(a){var t,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,""!==y){e.next=12;break}return e.next=4,R.addUser(n,a.email.value,a.senha.value,{nome:a.nome.value,foto_url:"https://jsl-online.com/wp-content/uploads/2017/01/placeholder-user.png",email:a.email.value});case 4:return alert("Administrador adicionado com Sucesso!"),e.next=7,R.findAll();case 7:t=e.sent,s(t),o(),e.next=30;break;case 12:if(!re(y)){e.next=30;break}return e.prev=13,e.next=16,N(v);case 16:return e.next=18,R.addUser(n,a.email.value,a.senha.value,{nome:a.nome.value,foto_url:y,email:a.email.value});case 18:return re(y),alert("Administrador adicionado com Sucesso!"),e.next=22,R.findAll();case 22:r=e.sent,s(r),o(),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(13),alert(e.t0);case 30:e.next=36;break;case 32:e.prev=32,e.t1=e.catch(0),f(!1),alert(e.t1);case 36:case"end":return e.stop()}}),e,null,[[0,32],[13,27]])})));return function(a){return e.apply(this,arguments)}}(),j=function(){var e=Object(A.a)(C.a.mark((function e(a){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.update({_id:c._id},{nome:a.nome.value,email:a.email.value});case 3:return e.next=5,R.findAll();case 5:t=e.sent,s(t),alert("Administrador editado com Sucesso!"),o(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),alert(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(a){return e.apply(this,arguments)}}(),D=function(){var e=Object(A.a)(C.a.mark((function e(){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.delete({_id:c._id});case 3:return e.next=5,R.findAll();case 5:a=e.sent,s(a),alert("Administrador deletado com Sucesso!"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(A.a)(C.a.mark((function e(a){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.target,a.preventDefault(),f(!0),w){e.next=8;break}return e.next=6,O(t);case 6:e.next=10;break;case 8:return e.next=10,j(t);case 10:i(),k(!1),f(!1);case 13:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(q,{onSubmit:L,show:a,header:r.a.createElement("header",null,r.a.createElement("div",null,r.a.createElement("h1",null,"nome"in c?"Informa\xe7\xf5es do Administrador":"Adicionar Administrativo")),r.a.createElement("div",{className:"close_container",onClick:function(){t(),k(!1),i()}},r.a.createElement("i",{className:"fa fa-times"}))),body:r.a.createElement("div",null,r.a.createElement(aa,{onChangeFile:function(e,a){h(e),S(a)},urlName:"foto_url",fileName:"userfile"}),r.a.createElement(P,{defaultValue:c.nome,disabled:"nome"in c&&!w,label:"Nome",name:"nome"}),r.a.createElement(P,{defaultValue:c.email,disabled:"nome"in c&&!w,label:"Login",name:"email"}),"email"in c?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"flex"},r.a.createElement(P,{label:"Senha",type:"password",name:"senha"}),r.a.createElement(P,{label:"Confirmar Senha",type:"password"}))),footer:r.a.createElement("div",{className:"footer"},"nome"in c?r.a.createElement("div",{className:"flex crud_ops"},r.a.createElement(T,{text:"Remover",type:"button",onClick:Object(A.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Tem certeza que deseja apagar esse administrador do sistema?")){e.next=5;break}return e.next=3,D();case 3:o(),k(!1);case 5:case"end":return e.stop()}}),e)})))}),r.a.createElement(T,{editing:w,onClick:function(){return k(!0)},text:"Editar",type:"button"})):r.a.createElement(r.a.Fragment,null),r.a.createElement(T,{loading:m,type:"submit",text:"Confirmar"}))})}))),ca=Object(s.b)((function(e){return{showModal:e.general.showModal,modalType:e.general.modalType,client:e.general.mongoClient,userLogged:e.general.userLogged,administradores:e.administradores.administradores}}),(function(e){return{openModal:function(a){return e({type:d.showModal,payload:a})},closeModal:function(){return e({type:d.closeModal})},setAdministrativo:function(a){return e({type:d.setAdministrativo,payload:a})}}}))((function(e){var a=Object(O.useHistory)();return r.a.useEffect((function(){R.db&&R.findAll().then((function(a){e.setAdministrativo(a)})),"ocupacao"in e.userLogged&&a.push("/")}),[e.client]),"nome"in e.userLogged?r.a.createElement("div",null,r.a.createElement(la,{close:function(){return e.closeModal()},show:e.showModal&&e.modalType===be.adicionarAdministrador}),r.a.createElement(Ye,{pageSelected:"administrativo"}),r.a.createElement("div",{className:"container_adms"},e.administradores.map((function(e,a){return r.a.createElement(oa,{key:a,administrador:e})}))),r.a.createElement(ea,{onClick:function(){e.openModal(be.adicionarAdministrador)}})):r.a.createElement(O.Redirect,{to:"/"})})),sa=(t(242),t(243),Object(s.b)(null,(function(e){return{openModal:function(a){return e({type:d.showModal,payload:a})},selectSala:function(a){return e({type:d.selectSala,payload:a})}}}))((function(e){return r.a.createElement("div",{className:"card_sala"},r.a.createElement("img",{alt:"sala",src:e.sala.fotos[0]}),r.a.createElement("div",null,r.a.createElement("h2",null,e.sala.nome),r.a.createElement(T,{onClick:function(){e.openModal(be.adicionarSalas),e.selectSala(e.sala)},text:"Informa\xe7\xf5es"})))}))),ia=Object(s.b)((function(e){return{mongoClient:e.general.mongoClient,salaSelected:e.salas.salaSelected}}),(function(e){return{closeModal:function(){return e({type:d.closeModal})},unselectSala:function(){return e({type:d.selectSala,payload:{}})}}}))((function(e){var a=e.show,t=e.closeModal,n=(e.mongoClient,e.close),o=e.salaSelected,l=e.unselectSala,c=r.a.useState(!1),s=Object(M.a)(c,2),i=s[0],u=s[1],d=r.a.useState(null),m=Object(M.a)(d,2),f=m[0],p=m[1],g=r.a.useState(!1),v=Object(M.a)(g,2),h=v[0],E=v[1],b=r.a.useState(""),y=Object(M.a)(b,2),S=y[0],_=y[1],x=function(){var e=Object(A.a)(C.a.mark((function e(a){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://teste.integracps.com.br/imageUpload.php",(t=new FormData).append("userfile",a),n={headers:{"content-type":"multipart/form-data"}},e.abrupt("return",Object(ta.post)("https://teste.integracps.com.br/imageUpload.php",t,n));case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),w=function(){var e=Object(A.a)(C.a.mark((function e(a){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!re(S)){e.next=14;break}return e.prev=1,e.next=4,x(f);case 4:return e.next=6,ke.create({nome:a.nome.value,descricao:a.descricao.value,valor_hora:Number(a.valor_hora.value),fotos:[S]});case 6:alert("Sala adicionada com Sucesso!"),t(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),alert(e.t0);case 13:u(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(a){return e.apply(this,arguments)}}(),k=function(){var e=Object(A.a)(C.a.mark((function e(a){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke.update({_id:o._id},{nome:a.nome.value,descricao:a.descricao.value,valor_hora:Number(a.valor_hora.value)});case 3:alert("Sala editada com sucesso!"),t(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:u(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}(),N=function(){var e=Object(A.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke.delete({_id:o._id});case 3:alert("Sala removida com sucesso!"),t(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:l(),u(!1);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(A.a)(C.a.mark((function e(a){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n=a.target,u(!0),h){e.next=8;break}return e.next=6,w(n);case 6:e.next=10;break;case 8:return e.next=10,k(n);case 10:l(),E(!1),t();case 13:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(q,{show:a,onSubmit:O,header:r.a.createElement("header",null,r.a.createElement("div",null,r.a.createElement("h1",null,"nome"in o?"Informa\xe7\xf5es da Sala":"Adicionar Sala")),r.a.createElement("div",{className:"close_container",onClick:function(){n(),l(),E(!1)}},r.a.createElement("i",{className:"fa fa-times"}))),body:r.a.createElement("div",null,r.a.createElement(aa,{onChangeFile:function(e,a){p(e),_(a)},fileName:"userfile",urlName:"file_url"}),r.a.createElement(P,{disabled:"nome"in o&&!h,defaultValue:o.nome,label:"Nome",name:"nome",required:!0}),r.a.createElement(P,{disabled:"nome"in o&&!h,defaultValue:o.descricao,label:"Descri\xe7\xe3o",name:"descricao",required:!0}),r.a.createElement(P,{disabled:"nome"in o&&!h,defaultValue:o.valor_hora,label:"Valor da Hora",name:"valor_hora",type:"number",required:!0})),footer:r.a.createElement("div",{className:"footer"},"nome"in o?r.a.createElement("div",{className:"flex crud_ops"},r.a.createElement(T,{text:"Remover",type:"button",onClick:Object(A.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Tem certeza que deseja apagar essa sala do sistema?")){e.next=5;break}return e.next=3,N();case 3:t(),E(!1);case 5:case"end":return e.stop()}}),e)})))}),r.a.createElement(T,{editing:h,onClick:function(){return E(!0)},text:"Editar",type:"button"})):r.a.createElement(r.a.Fragment,null),r.a.createElement(T,{loading:i,type:"submit",text:"Confirmar"}))})})),ua=Object(s.b)((function(e){return{showModal:e.general.showModal,modalType:e.general.modalType,salas:e.salas.salas,userLogged:e.general.userLogged}}),(function(e){return{openModal:function(a){return e({type:d.showModal,payload:a})},closeModal:function(){return e({type:d.closeModal})},setSalas:function(a){return e({type:d.setSalas,payload:a})}}}))((function(e){var a=Object(O.useHistory)();"ocupacao"in e.userLogged&&a.push("/"),r.a.useEffect((function(){ke.db&&ke.findAll().then((function(a){e.setSalas(a)}))}));return"nome"in e.userLogged?r.a.createElement("div",null,r.a.createElement(Ye,{pageSelected:"salas"}),r.a.createElement(ia,{close:function(){return e.closeModal()},show:e.showModal&&e.modalType===be.adicionarSalas}),r.a.createElement("div",{className:"salas_container"},r.a.createElement("div",{className:"header_salas"},r.a.createElement("div",null,r.a.createElement("h1",null,"Salas Cadastradas"),r.a.createElement("h3",null,"Abaixo seguem as salas possu\xeddas pela Integra")),r.a.createElement("div",null)),r.a.createElement("div",{className:"salas"},e.salas.sort((function(e,a){var t=[e.nome.split(" "),a.nome.split(" ")],n=t[0],r=t[1];return+n[1]>+r[1]?1:+n[1]<+r[1]?-1:0})).map((function(e,a){return r.a.createElement(sa,{sala:e,key:a})})))),r.a.createElement(ea,{onClick:function(){return e.openModal(be.adicionarSalas)}})):r.a.createElement(O.Redirect,{to:"/"})})),da=(t(244),t(150)),ma=t.n(da),fa=Object(s.b)((function(e){return{mongoClient:e.general.mongoClient}}),(function(e){return{}}))((function(e){var a=Object(O.useHistory)(),n=r.a.useState(null),o=Object(M.a)(n,2),l=o[0],s=o[1],i=r.a.useState(!1),u=Object(M.a)(i,2),d=u[0],m=u[1];r.a.useEffect((function(){var t={token:ma.a.parse(e.location.search,{ignoreQueryPrefix:!0}).token,tokenId:ma.a.parse(e.location.search).tokenId};t.token||a.push("/"),s(t),console.log(t)}),[]);var f=function(){var a=Object(A.a)(C.a.mark((function a(t){var n,r,o,s;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.preventDefault(),n=t.target,r=[n.nova_senha.value,n.conf_senha.value],(o=r[0])===r[1]){a.next=7;break}alert("As senhas n\xe3o conferem."),a.next=22;break;case 7:if(!(o.length<6)){a.next=11;break}alert("Por favor, insira uma senha com mais de 6 caracteres."),a.next=22;break;case 11:return m(!0),a.prev=12,s=e.mongoClient.auth.getProviderClient(c.d.factory),a.next=16,s.resetPassword(l.token,l.tokenId,o);case 16:a.next=21;break;case 18:a.prev=18,a.t0=a.catch(12),alert(a.t0);case 21:m(!1);case 22:case"end":return a.stop()}}),a,null,[[12,18]])})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"reset_password_container"},r.a.createElement("img",{src:t(121),alt:""}),r.a.createElement("form",{onSubmit:f},r.a.createElement("h1",{style:{color:"#888",marginTop:0}},"Redefinir Senha"),r.a.createElement(P,{label:"Nova Senha",type:"password",name:"nova_senha"}),r.a.createElement(P,{label:"Confirmar Senha",type:"password",name:"conf_senha"}),r.a.createElement(T,{text:"Confirmar",type:"submit",loading:d})))})),pa=(t(247),Object(s.b)((function(e){return{}}),(function(e){return{}}))((function(e){return r.a.createElement("div",{className:"configuracoes_container"},r.a.createElement(G,null),r.a.createElement("div",{style:{marginTop:35}},r.a.createElement(N.b,{to:"/agendamentos"},r.a.createElement("i",{className:"fas fa-chevron-left"})," \xa0 Voltar para P\xe1gina Inicial")),r.a.createElement("div",{className:"configuracoes_body"},r.a.createElement("h2",null,"Alterar Descri\xe7\xe3o"),r.a.createElement("p",null,"Sua descri\xe7\xe3o \xe9 seu curr\xedculo, voc\xea pode incluir o que voc\xea faz, sua forma\xe7\xe3o acad\xeamica, e quanto tempo de experi\xeancia na \xe1rea que voc\xea atua."),r.a.createElement("p",null,r.a.createElement("textarea",{placeholder:"Sua nova descri\xe7\xe3o vai aqui.",style:{width:"50%",height:150,padding:15}})),r.a.createElement(T,{text:"Confirmar",width:"250px"}),r.a.createElement("h2",null,"Recuperar Senha"),r.a.createElement("p",null,"Enviaremos um e-mail para seu e-mail cadastrado para redefinir a sua senha."),r.a.createElement(T,{text:"Enviar e-mail",width:"350px"})))}))),ga=(t(248),Object(s.b)((function(e){return{userLogged:e.general.userLogged}}),(function(e){return{}}))((function(e){var a=Object(O.useHistory)(),t=r.a.useState(!0),n=Object(M.a)(t,2),o=n[0],l=n[1],c=function(){var a=Object(A.a)(C.a.mark((function a(){return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l(!0),a.abrupt("return",R.find({email:e.userLogged.email}));case 2:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.a.useEffect((function(){c().then((function(e){0===e.length&&a.push("/"),l(!1)}))}),[]),o?r.a.createElement("div",null,r.a.createElement("h1",null,"Carregando...")):r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){return a.push("/agendamento_adm")}},r.a.createElement("h1",null,"Entrar como Administrador")),r.a.createElement("div",null,r.a.createElement("h1",null,"Entrar como Profissional")))})));var va=function(){return r.a.useEffect((function(){var e=c.c.initializeDefaultAppClient("integra-rhnuz"),a=e.getServiceClient(c.b.factory,"mongodb-atlas").db("Integra");k.dispatch({type:d.setMongoClient,payload:e}),k.dispatch({type:d.setDatabase,payload:a}),function(e){H.setDb(e),R.setDb(e),ke.setDb(e),ne.setDb(e),J.setDb(e)}(a)}),[]),r.a.createElement(s.a,{store:k},r.a.createElement(N.a,null,r.a.createElement(O.Route,{path:"/",exact:!0,component:z}),r.a.createElement(O.Route,{path:"/agendamentos",component:Ne}),r.a.createElement(O.Route,{path:"/minhas_reservas",component:De}),r.a.createElement(O.Route,{path:"/agendamento_adm",component:Ge}),r.a.createElement(O.Route,{path:"/dashboard",component:Je}),r.a.createElement(O.Route,{path:"/administrativo",component:ca}),r.a.createElement(O.Route,{path:"/profissionais",component:ra}),r.a.createElement(O.Route,{path:"/tipoUsuario",component:ga}),r.a.createElement(O.Route,{path:"/salas",component:ua}),r.a.createElement(O.Route,{path:"/configuracoes",component:pa}),r.a.createElement(O.Route,{path:"/recuperarSenha",component:fa}),r.a.createElement(O.Route,{path:"/logs",component:Ke})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(va,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[169,1,3]]]);
//# sourceMappingURL=main.74fa52f1.chunk.js.map